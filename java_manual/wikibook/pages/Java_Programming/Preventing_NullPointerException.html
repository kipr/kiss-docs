<html><head><title>Java Programming/Preventing NullPointerException</title><link media="all" href="../../misc/modern.css" type="text/css" rel="stylesheet"></head><body class="mediawiki"><div id="content"><h1 class="firstHeading" id="firstHeading">Java Programming/Preventing NullPointerException</h1><div id="bodyContent">
								
				
				
								
				
				
																
				
				
								
				<div lang="en" dir="ltr" class="mw-content-ltr"><table class="wikitable" style="float: right;"><tr><td>Navigate <b><a href="Exceptions.html" title="Java Programming/Exceptions">Exceptions</a></b> topic:
<ul><li><a href="Throwing_and_Catching_Exceptions.html" title="Java Programming/Throwing and Catching Exceptions">Throwing and catching exceptions</a></li>
</ul><dl><dd>
<dl><dd><a href="Throwing_and_Catching_Exceptions.html" title="Java Programming/Throwing and Catching Exceptions">Application exceptions</a></dd>
<dd><a href="Throwing_and_Catching_Exceptions.html" title="Java Programming/Throwing and Catching Exceptions">Runtime exceptions</a></dd>
<dd><code><a href="Throwing_and_Catching_Exceptions.html" title="Java Programming/Throwing and Catching Exceptions">NullPointerException</a></code></dd>
<dd><a href="Throwing_and_Catching_Exceptions.html" title="Java Programming/Throwing and Catching Exceptions">Main Exception classes</a></dd>
</dl></dd>
</dl><ul><li><a href="http://en.wikibooks.org/wiki/Java_Programming/StackTrace" title="Java Programming/StackTrace" class="mw-redirect">Stack trace</a></li>
<li><a href="Checked_Exceptions.html" title="Java Programming/Checked Exceptions">Checked exceptions</a></li>
<li><a href="Unchecked_Exceptions.html" title="Java Programming/Unchecked Exceptions">Unchecked exceptions</a></li>
<li><strong class="selflink">Preventing <code>NullPointerException</code></strong></li>
<li><a href="Nesting_Exceptions.html" title="Java Programming/Nesting Exceptions">Chained exceptions(Nesting Exceptions)</a></li>
</ul></td>
</tr></table><p>This page describes some techniques for preventing NullPointerException.</p>
<p>It does not describe general techniques for how you should program Java. It is of some use, to make you more aware of null values, and to be more careful about generating them yourself.</p>
<p>Note that this list is not complete - there are no rules for preventing NullPointerException entirely in Java, because the standard libraries have to be used, and they can cause NullPointerExceptions. Also, it is possible to observe an uninitialised final field in Java, so you can't even treat a final field as being completely trusted during the object's creation.</p>
<p>A good approach is to learn how to deal with NullPointerExceptions first, and become competent with that. These suggestions will help you to cause less NullPointerExceptions, but they don't replace the need to know about NullPointerExceptions.</p>
<table id="toc" class="toc"><tr><td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul><li class="toclevel-1 tocsection-1"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Preventing_NullPointerException&amp;printable=yes#Minimize_the_use_of_the_keyword_.27null.27_in_assignment_statements"><span class="tocnumber">1</span> <span class="toctext">Minimize the use of the keyword 'null' in assignment statements</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Preventing_NullPointerException&amp;printable=yes#Minimize_the_use_of_the_new_Type.5Bint.5D_syntax_for_creating_arrays_of_objects"><span class="tocnumber">2</span> <span class="toctext">Minimize the use of the new Type[int] syntax for creating arrays of objects</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Preventing_NullPointerException&amp;printable=yes#Check_all_references_obtained_from_.27untrusted.27_methods"><span class="tocnumber">3</span> <span class="toctext">Check all references obtained from 'untrusted' methods</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Preventing_NullPointerException&amp;printable=yes#Comparing_string_variable_with_a_string_literal"><span class="tocnumber">4</span> <span class="toctext">Comparing string variable with a string literal</span></a></li>
</ul></td>
</tr></table><h2> <span class="mw-headline" id="Minimize_the_use_of_the_keyword_.27null.27_in_assignment_statements">Minimize the use of the keyword 'null' in assignment statements</span></h2>
<p>This means not doing things like:</p>
<pre>
String s=null;
<code><a href="Keywords/while.html" title="Java Programming/Keywords/while"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">while</font></a></code> (something)
    <code><a href="Keywords/if.html" title="Java Programming/Keywords/if"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">if</font></a></code> (something2)
                s="yep";

<code><a href="Keywords/if.html" title="Java Programming/Keywords/if"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">if</font></a></code> (s!=null)
    something3(s);
</pre>
<p>You can replace this with:</p>
<pre>
<code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> done=false;

<code><a href="Keywords/while.html" title="Java Programming/Keywords/while"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">while</font></a></code> (!done &amp;&amp; something)
    <code><a href="Keywords/if.html" title="Java Programming/Keywords/if"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">if</font></a></code> (something2)
    {
       done=true;
       something3("yep");
    }
</pre>
<p>You might also consider replacing null with "" in the first example, but default values bring about bugs caused by default values being left in place. A NullPointerException is actually better, as it allows the runtime to tell you about the bug, rather than just continue with a default value.</p>
<h2> <span class="mw-headline" id="Minimize_the_use_of_the_new_Type.5Bint.5D_syntax_for_creating_arrays_of_objects">Minimize the use of the new Type[int] syntax for creating arrays of objects</span></h2>
<p>An array created using new Object[10] has 10 null pointers. That's 10 more than we want, so use collections instead, or explicitly fill the array at initialisation with:</p>
<pre>
Object[] objects={"blah",5,new File("/usr/bin")};
</pre>
<p>or:</p>
<pre>
Object[] objects;
objects=new Object[]{"blah",5,new File("/usr/bin")};
</pre>
<p><br></p>
<h2> <span class="mw-headline" id="Check_all_references_obtained_from_.27untrusted.27_methods">Check all references obtained from 'untrusted' methods</span></h2>
<p>Many methods that can return a reference can return a null reference. Make sure you check these. For example:</p>
<pre>
File file=new File("/etc");
File[] files=file.listFiles();
if (files!=null)
{
        stuff
}
</pre>
<p>File.listFiles() can return null if "/etc" is not a directory.</p>
<p>You can decide to trust some methods not to return null, if you like, but that's an assumption you're making. Some methods that don't specify that they might return null, actually do, instead of throwing an exception.</p>
<h2> <span class="mw-headline" id="Comparing_string_variable_with_a_string_literal">Comparing string variable with a string literal</span></h2>
<p>When you compare a variable with a string literal, always put the string literal first. For example do:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">if</span> <span class="br0">(</span> <span class="st0">"OK"</span>.<span class="me1">equals</span><span class="br0">(</span> state <span class="br0">)</span> <span class="br0">)</span>
 <span class="br0">{</span>
   ...
 <span class="br0">}</span>
</pre></div>
</div>
<p>and do not do:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<strike> <span class="kw1">if</span> <span class="br0">(</span> state.<span class="me1">equals</span><span class="br0">(</span> <span class="st0">"OK"</span> <span class="br0">)</span> <span class="br0">)</span>
 <span class="br0">{</span>
   ...
 <span class="br0">}</span></strike>
</pre></div>
</div>
<p>If the 'state' variable is null, you get a NullPointerException in the second example, but not in the first one.</p>





</div>				
								
				
				
												
								
												
				
				
								<div class="visualClear"></div>
				
								
			</div>
			</div></body></html>