<html><head><title>Java Programming/SwingLargeExamples</title><link media="all" href="../../misc/modern.css" type="text/css" rel="stylesheet"></head><body class="mediawiki"><div id="content"><h1 class="firstHeading" id="firstHeading">Java Programming/SwingLargeExamples</h1><div id="bodyContent">
								
				
				
								
				
				
																
				
				
								
				<div lang="en" dir="ltr" class="mw-content-ltr"><table class="wikitable" style="float: right;"><tr><td><b>User Interface Topics</b>:
<ul><li><a href="http://en.wikibooks.org/wiki/Java_Programming/BasicIO" title="Java Programming/BasicIO" class="mw-redirect">Basic I/O</a></li>
<li><a href="Event_Handling.html" title="Java Programming/Event Handling">Event handling</a></li>
<li><a href="Swing.html" title="Java Programming/Swing">Intro to Swing</a></li>
<li><a href="Graphics.html" title="Java Programming/Graphics">Graphics</a></li>
<li><a href="Applets.html" title="Java Programming/Applets">Applets</a><br><br></li>
</ul></td>
</tr></table><table class="wikitable" style="float: right;"><tr><td>Navigate <b><a href="Swing.html" title="Java Programming/Swing">Swing</a></b> topic: 
<ul><li> <a href="Swing.html" title="Java Programming/Swing">Overview</a></li>
<li> <a href="FirstExamples.html" title="Java Programming/FirstExamples">First Example: Frames and Labels</a></li>
<li> <a href="Events_and_Buttons.html" title="Java Programming/Events and Buttons">Events and Buttons</a></li>
<li> <a href="Responsive_Swing_Application.html" title="Java Programming/Responsive Swing Application">A Responsive Application</a></li>
<li> <a href="SwingLayouts.html" title="Java Programming/SwingLayouts">Layouts</a></li>
<li> <strong class="selflink">Building a Calculator</strong></li>
</ul></td>
</tr></table><p><br></p>
<table id="toc" class="toc"><tr><td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul><li class="toclevel-1 tocsection-1"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Calculator"><span class="tocnumber">1</span> <span class="toctext">Calculator</span></a>
<ul><li class="toclevel-2 tocsection-2"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Main_Method"><span class="tocnumber">1.1</span> <span class="toctext">Main Method</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Constructor"><span class="tocnumber">1.2</span> <span class="toctext">Constructor</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Listeners"><span class="tocnumber">1.3</span> <span class="toctext">Listeners</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Building_the_buttons"><span class="tocnumber">1.4</span> <span class="toctext">Building the buttons</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Building_the_panels"><span class="tocnumber">1.5</span> <span class="toctext">Building the panels</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/SwingLargeExamples&amp;printable=yes#Full_code_for_the_Calculator"><span class="tocnumber">1.6</span> <span class="toctext">Full code for the Calculator</span></a></li>
</ul></li>
</ul></td>
</tr></table><h4> <span class="mw-headline" id="Calculator">Calculator</span></h4>
<p>The below example demonstrates using multiple nested layout managers in building a user interface, applying listeners and client properties to components, and how to create components from the Event Dispatch Thread.</p>
<h5> <span class="mw-headline" id="Main_Method">Main Method</span></h5>
<dl><dd>The main method is pretty straight forward. It creates a new calculator, sets it to exit the program when its closed and then makes it visible. The interesting bit about this code is that it doesn't happen in the main thread. It happens in the event dispatch thread. While in a simple application like this its enough to simply wrap the whole component creation in an invokeLater to push it into the EDT, larger applications need to be careful that they only access UI components from the EDT. Not doing so can cause mysterious deadlocks in applications.</dd>
</dl><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="co1">// Remember, all swing components must be accessed from</span>
    <span class="co1">// the event dispatch thread.</span>
    <span class="kw3">SwingUtilities</span>.<span class="me1">invokeLater</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Runnable</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
            Calculator calc <span class="sy0">=</span> <span class="kw1">new</span> Calculator<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
            calc.<span class="me1">setDefaultCloseOperation</span><span class="br0">(</span><span class="kw3">JFrame</span>.<span class="me1">EXIT_ON_CLOSE</span><span class="br0">)</span><span class="sy0">;</span>
            calc.<span class="me1">setVisible</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Constructor">Constructor</span></h5>
<dl><dd>The constructor is where the calculator is laid out. This approach uses inheritance for defining the calculator. Another way of doing it would have been to have a getComponent() method which would return a panel laid out as desired. The calculator would then be a controller dictating the behavior of the panels and own the panel all the components were on. While more complex, that method also scales more easily to larger, more complicated UIs. Inheritance has the problem of child classes having the ability to override methods that are currently being called in the constructor of the parent class. If the overridden methods required a field in the child class to be initialized already you're in trouble. At the time that the method would be called in the parent, the child hasn't been fully initialized yet.</dd>
<dd>Note that the constructor uses two BorderLayouts to do the layout. The first is for the main panel, the second is to compose the main panel with the error message panel. Also, each of the subpanels in the main panel are built with their own layout managers. This is a good example of building a more complicated UI as a composite of multiple simpler sub-panels.</dd>
</dl><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">public</span> Calculator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">super</span><span class="br0">(</span><span class="st0">"Calculator"</span><span class="br0">)</span><span class="sy0">;</span>
 
    <span class="kw3">JPanel</span> mainpanel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">BorderLayout</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">JPanel</span> numberPanel <span class="sy0">=</span> buildNumberPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">JPanel</span> operatorPanel <span class="sy0">=</span> buildOperatorPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">JPanel</span> clearPanel <span class="sy0">=</span> buildClearPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    lcdDisplay <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JTextArea</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    mainpanel.<span class="me1">add</span><span class="br0">(</span>clearPanel, <span class="kw3">BorderLayout</span>.<span class="me1">SOUTH</span><span class="br0">)</span><span class="sy0">;</span>
    mainpanel.<span class="me1">add</span><span class="br0">(</span>numberPanel, <span class="kw3">BorderLayout</span>.<span class="me1">CENTER</span><span class="br0">)</span><span class="sy0">;</span>
    mainpanel.<span class="me1">add</span><span class="br0">(</span>operatorPanel, <span class="kw3">BorderLayout</span>.<span class="me1">EAST</span><span class="br0">)</span><span class="sy0">;</span>
    mainpanel.<span class="me1">add</span><span class="br0">(</span>lcdDisplay, <span class="kw3">BorderLayout</span>.<span class="me1">NORTH</span><span class="br0">)</span><span class="sy0">;</span>
 
    errorDisplay <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JLabel</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
    errorDisplay.<span class="me1">setFont</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Font</span><span class="br0">(</span><span class="st0">"Dialog"</span>, <span class="kw3">Font</span>.<span class="me1">BOLD</span>, <span class="nu0">12</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
    getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">BorderLayout</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">add</span><span class="br0">(</span>mainpanel, <span class="kw3">BorderLayout</span>.<span class="me1">CENTER</span><span class="br0">)</span><span class="sy0">;</span>
    getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">add</span><span class="br0">(</span>errorDisplay, <span class="kw3">BorderLayout</span>.<span class="me1">SOUTH</span><span class="br0">)</span><span class="sy0">;</span>
 
    pack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    resetState<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Listeners">Listeners</span></h5>
<dl><dd>Here we start getting into the fun bits. For each of the buttons we want something to listen for the button being pushed. The ActionListener class does just that. We setup a separate listener for each type of button. Numbers, Decimals, Operators and Clear buttons. Each one processes the message associated with that class of button and only that class of button. While that's fine, how do you determine which button in that class was pressed? Well, Swing provides a way of setting arbitrary properties on objects. This is accomplished by the <code>getClientProperty putClientProperty</code> pair. Below, we tell the difference between the number buttons by which number is associated with the clientProperty of the button. Similarly the operatorListener does the same, but pulling out its own property.</dd>
</dl><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> numberListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JComponent</span> source <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">JComponent</span><span class="br0">)</span>e.<span class="me1">getSource</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">Integer</span> number <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Integer</span><span class="br0">)</span> source.<span class="me1">getClientProperty</span><span class="br0">(</span>NUMBER_PROPERTY<span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">if</span><span class="br0">(</span>number <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span><span class="br0">{</span>
            <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalStateException</span><span class="br0">(</span><span class="st0">"No NUMBER_PROPERTY on component"</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
 
        numberButtonPressed<span class="br0">(</span>number.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span>
 
<span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> decimalListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
        decimalButtonPressed<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span>
 
<span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> operatorListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JComponent</span> source <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">JComponent</span><span class="br0">)</span> e.<span class="me1">getSource</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">Integer</span> opCode <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Integer</span><span class="br0">)</span> source.<span class="me1">getClientProperty</span><span class="br0">(</span>OPERATOR_PROPERTY<span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">if</span> <span class="br0">(</span>opCode <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
            <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalStateException</span><span class="br0">(</span><span class="st0">"No OPERATOR_PROPERTY on component"</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
 
        operatorButtonPressed<span class="br0">(</span>opCode<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span>
 
<span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> clearListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
        resetState<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Building_the_buttons">Building the buttons</span></h5>
<dl><dd>Here we can see how the listeners get assigned to the buttons. First we set the label for the buttons by passing a <code>String</code> to the constructor of the JButton, then we set the property value that we want using <code>putClientProperty</code> then we add the appropriate ActionListener to the button. Action listeners are activated when the component takes its intended action. For a <code>JButton</code> that means being pressed.</dd>
</dl><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">private</span> <span class="kw3">JButton</span> buildNumberButton<span class="br0">(</span><span class="kw4">int</span> number<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">JButton</span> button <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="kw3">Integer</span>.<span class="me1">toString</span><span class="br0">(</span>number<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    button.<span class="me1">putClientProperty</span><span class="br0">(</span>NUMBER_PROPERTY, <span class="kw3">Integer</span>.<span class="me1">valueOf</span><span class="br0">(</span>number<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    button.<span class="me1">addActionListener</span><span class="br0">(</span>numberListener<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">return</span> button<span class="sy0">;</span>
<span class="br0">}</span>
 
<span class="kw1">private</span> <span class="kw3">JButton</span> buildOperatorButton<span class="br0">(</span><span class="kw3">String</span> symbol, <span class="kw4">int</span> opType<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">JButton</span> plus <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span>symbol<span class="br0">)</span><span class="sy0">;</span>
    plus.<span class="me1">putClientProperty</span><span class="br0">(</span>OPERATOR_PROPERTY, <span class="kw3">Integer</span>.<span class="me1">valueOf</span><span class="br0">(</span>opType<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    plus.<span class="me1">addActionListener</span><span class="br0">(</span>operatorListener<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">return</span> plus<span class="sy0">;</span>
<span class="br0">}</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Building_the_panels">Building the panels</span></h5>
<dl><dd>Here we show building the number panel. We want an even grid for the number keys and want them all to be sized the same so we use a <code>GridLayout</code> as our LayoutManager. This grid is 4 rows deep and 3 columns wide. Building the operator panel and the clear panel are both done similarly.</dd>
</dl><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">public</span> <span class="kw3">JPanel</span> buildNumberPanel<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">JPanel</span> panel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">GridLayout</span><span class="br0">(</span><span class="nu0">4</span>, <span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">6</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">9</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
    <span class="kw3">JButton</span> buttondec <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span>
    buttondec.<span class="me1">addActionListener</span><span class="br0">(</span>decimalListener<span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buttondec<span class="br0">)</span><span class="sy0">;</span>
 
    panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
    <span class="co1">//Exit button is to close the calculator and terminate the program.</span>
    <span class="kw3">JButton</span> buttonExit <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"EXIT"</span><span class="br0">)</span><span class="sy0">;</span>
    buttonExit.<span class="me1">setMnemonic</span><span class="br0">(</span><span class="kw3">KeyEvent</span>.<span class="me1">VK_C</span><span class="br0">)</span><span class="sy0">;</span>
    buttonExit.<span class="me1">addActionListener</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
            <span class="kw3">System</span>.<span class="me1">exit</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>
    panel.<span class="me1">add</span><span class="br0">(</span>buttonExit<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">return</span> panel<span class="sy0">;</span>
 
<span class="br0">}</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Full_code_for_the_Calculator">Full code for the Calculator</span></h5>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
<span class="kw1">import</span> <span class="co2">javax.swing.JButton</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.JComponent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.JFrame</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.JLabel</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.JPanel</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.JTextArea</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">javax.swing.SwingUtilities</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.BorderLayout</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.Font</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.GridLayout</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.event.ActionEvent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.event.ActionListener</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.awt.event.KeyEvent</span><span class="sy0">;</span>
 
<span class="kw1">public</span> <span class="kw1">class</span> Calculator <span class="kw1">extends</span> <span class="kw3">JFrame</span> <span class="br0">{</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> NUMBER_PROPERTY <span class="sy0">=</span> <span class="st0">"NUMBER_PROPERTY"</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> OPERATOR_PROPERTY <span class="sy0">=</span> <span class="st0">"OPERATOR_PROPERTY"</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> FIRST <span class="sy0">=</span> <span class="st0">"FIRST"</span><span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw3">String</span> VALID <span class="sy0">=</span> <span class="st0">"VALID"</span><span class="sy0">;</span>
 
    <span class="co1">// These would be much better if placed in an enum,</span>
    <span class="co1">// but enums are only available starting in Java 5.</span>
    <span class="co1">// Code using them isn't back portable.</span>
    <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw1">interface</span> Operator<span class="br0">{</span>
        <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> EQUALS <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
        <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> PLUS <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
        <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> MINUS <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">;</span>
        <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> MULTIPLY <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">;</span>
        <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw4">int</span> DIVIDE <span class="sy0">=</span> <span class="nu0">4</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw3">String</span> status<span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw4">int</span> previousOperation<span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw4">double</span> lastValue<span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw3">JTextArea</span> lcdDisplay<span class="sy0">;</span>
    <span class="kw1">private</span> <span class="kw3">JLabel</span> errorDisplay<span class="sy0">;</span>
 
    <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
        <span class="co1">// Remember, all swing components must be accessed from</span>
        <span class="co1">// the event dispatch thread.</span>
        <span class="kw3">SwingUtilities</span>.<span class="me1">invokeLater</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Runnable</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
            <span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
                Calculator calc <span class="sy0">=</span> <span class="kw1">new</span> Calculator<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
                calc.<span class="me1">setDefaultCloseOperation</span><span class="br0">(</span><span class="kw3">JFrame</span>.<span class="me1">EXIT_ON_CLOSE</span><span class="br0">)</span><span class="sy0">;</span>
                calc.<span class="me1">setVisible</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
        <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> Calculator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">super</span><span class="br0">(</span><span class="st0">"Calculator"</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw3">JPanel</span> mainpanel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">BorderLayout</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">JPanel</span> numberPanel <span class="sy0">=</span> buildNumberPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">JPanel</span> operatorPanel <span class="sy0">=</span> buildOperatorPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">JPanel</span> clearPanel <span class="sy0">=</span> buildClearPanel<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        lcdDisplay <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JTextArea</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        mainpanel.<span class="me1">add</span><span class="br0">(</span>clearPanel, <span class="kw3">BorderLayout</span>.<span class="me1">SOUTH</span><span class="br0">)</span><span class="sy0">;</span>
        mainpanel.<span class="me1">add</span><span class="br0">(</span>numberPanel, <span class="kw3">BorderLayout</span>.<span class="me1">CENTER</span><span class="br0">)</span><span class="sy0">;</span>
        mainpanel.<span class="me1">add</span><span class="br0">(</span>operatorPanel, <span class="kw3">BorderLayout</span>.<span class="me1">EAST</span><span class="br0">)</span><span class="sy0">;</span>
        mainpanel.<span class="me1">add</span><span class="br0">(</span>lcdDisplay, <span class="kw3">BorderLayout</span>.<span class="me1">NORTH</span><span class="br0">)</span><span class="sy0">;</span>
 
        errorDisplay <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JLabel</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
        errorDisplay.<span class="me1">setFont</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">Font</span><span class="br0">(</span><span class="st0">"Dialog"</span>, <span class="kw3">Font</span>.<span class="me1">BOLD</span>, <span class="nu0">12</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">BorderLayout</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">add</span><span class="br0">(</span>mainpanel, <span class="kw3">BorderLayout</span>.<span class="me1">CENTER</span><span class="br0">)</span><span class="sy0">;</span>
        getContentPane<span class="br0">(</span><span class="br0">)</span>.<span class="me1">add</span><span class="br0">(</span>errorDisplay, <span class="kw3">BorderLayout</span>.<span class="me1">SOUTH</span><span class="br0">)</span><span class="sy0">;</span>
 
        pack<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        resetState<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> numberListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
            <span class="kw3">JComponent</span> source <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">JComponent</span><span class="br0">)</span>e.<span class="me1">getSource</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="kw3">Integer</span> number <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Integer</span><span class="br0">)</span> source.<span class="me1">getClientProperty</span><span class="br0">(</span>NUMBER_PROPERTY<span class="br0">)</span><span class="sy0">;</span>
            <span class="kw1">if</span><span class="br0">(</span>number <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span><span class="br0">{</span>
                <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalStateException</span><span class="br0">(</span><span class="st0">"No NUMBER_PROPERTY on component"</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
 
            numberButtonPressed<span class="br0">(</span>number.<span class="me1">intValue</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
 
    <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> decimalListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
            decimalButtonPressed<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
 
    <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> operatorListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
            <span class="kw3">JComponent</span> source <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">JComponent</span><span class="br0">)</span> e.<span class="me1">getSource</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="kw3">Integer</span> opCode <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Integer</span><span class="br0">)</span> source.<span class="me1">getClientProperty</span><span class="br0">(</span>OPERATOR_PROPERTY<span class="br0">)</span><span class="sy0">;</span>
            <span class="kw1">if</span> <span class="br0">(</span>opCode <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
                <span class="kw1">throw</span> <span class="kw1">new</span> <span class="kw3">IllegalStateException</span><span class="br0">(</span><span class="st0">"No OPERATOR_PROPERTY on component"</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
 
            operatorButtonPressed<span class="br0">(</span>opCode<span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
 
    <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw3">ActionListener</span> clearListener <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
            resetState<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
 
    <span class="kw1">private</span> <span class="kw3">JButton</span> buildNumberButton<span class="br0">(</span><span class="kw4">int</span> number<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JButton</span> button <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="kw3">Integer</span>.<span class="me1">toString</span><span class="br0">(</span>number<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        button.<span class="me1">putClientProperty</span><span class="br0">(</span>NUMBER_PROPERTY, <span class="kw3">Integer</span>.<span class="me1">valueOf</span><span class="br0">(</span>number<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        button.<span class="me1">addActionListener</span><span class="br0">(</span>numberListener<span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">return</span> button<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw3">JButton</span> buildOperatorButton<span class="br0">(</span><span class="kw3">String</span> symbol, <span class="kw4">int</span> opType<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JButton</span> plus <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span>symbol<span class="br0">)</span><span class="sy0">;</span>
        plus.<span class="me1">putClientProperty</span><span class="br0">(</span>OPERATOR_PROPERTY, <span class="kw3">Integer</span>.<span class="me1">valueOf</span><span class="br0">(</span>opType<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        plus.<span class="me1">addActionListener</span><span class="br0">(</span>operatorListener<span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">return</span> plus<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw3">JPanel</span> buildNumberPanel<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JPanel</span> panel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">GridLayout</span><span class="br0">(</span><span class="nu0">4</span>, <span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">6</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">9</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw3">JButton</span> buttondec <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"."</span><span class="br0">)</span><span class="sy0">;</span>
        buttondec.<span class="me1">addActionListener</span><span class="br0">(</span>decimalListener<span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buttondec<span class="br0">)</span><span class="sy0">;</span>
 
        panel.<span class="me1">add</span><span class="br0">(</span>buildNumberButton<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="co1">//Exit button is to close the calculator and terminate the program.</span>
        <span class="kw3">JButton</span> buttonExit <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"EXIT"</span><span class="br0">)</span><span class="sy0">;</span>
        buttonExit.<span class="me1">setMnemonic</span><span class="br0">(</span><span class="kw3">KeyEvent</span>.<span class="me1">VK_C</span><span class="br0">)</span><span class="sy0">;</span>
        buttonExit.<span class="me1">addActionListener</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">ActionListener</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
            <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
                <span class="kw3">System</span>.<span class="me1">exit</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
        <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buttonExit<span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">return</span> panel<span class="sy0">;</span>
 
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw3">JPanel</span> buildOperatorPanel<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JPanel</span> panel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">GridLayout</span><span class="br0">(</span><span class="nu0">4</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        panel.<span class="me1">add</span><span class="br0">(</span>buildOperatorButton<span class="br0">(</span><span class="st0">"+"</span>, Operator.<span class="me1">PLUS</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildOperatorButton<span class="br0">(</span><span class="st0">"-"</span>, Operator.<span class="me1">MINUS</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildOperatorButton<span class="br0">(</span><span class="st0">"*"</span>, Operator.<span class="me1">MULTIPLY</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>buildOperatorButton<span class="br0">(</span><span class="st0">"/"</span>, Operator.<span class="me1">DIVIDE</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">return</span> panel<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw3">JPanel</span> buildClearPanel<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">JPanel</span> panel <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JPanel</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">setLayout</span><span class="br0">(</span><span class="kw1">new</span> <span class="kw3">GridLayout</span><span class="br0">(</span><span class="nu0">1</span>, <span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw3">JButton</span> clear <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"C"</span><span class="br0">)</span><span class="sy0">;</span>
        clear.<span class="me1">addActionListener</span><span class="br0">(</span>clearListener<span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>clear<span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw3">JButton</span> CEntry <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span><span class="st0">"CE"</span><span class="br0">)</span><span class="sy0">;</span>
        CEntry.<span class="me1">addActionListener</span><span class="br0">(</span>clearListener<span class="br0">)</span><span class="sy0">;</span>
        panel.<span class="me1">add</span><span class="br0">(</span>CEntry<span class="br0">)</span><span class="sy0">;</span>
 
        panel.<span class="me1">add</span><span class="br0">(</span>buildOperatorButton<span class="br0">(</span><span class="st0">"="</span>, Operator.<span class="me1">EQUALS</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw1">return</span> panel<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw4">void</span> numberButtonPressed<span class="br0">(</span><span class="kw4">int</span> i<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">String</span> displayText <span class="sy0">=</span> lcdDisplay.<span class="me1">getText</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw3">String</span> valueString <span class="sy0">=</span> <span class="kw3">Integer</span>.<span class="me1">toString</span><span class="br0">(</span>i<span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="st0">"0"</span>.<span class="me1">equals</span><span class="br0">(</span>displayText<span class="br0">)</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span>FIRST.<span class="me1">equals</span><span class="br0">(</span>status<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
            displayText <span class="sy0">=</span> <span class="st0">""</span><span class="sy0">;</span>
        <span class="br0">}</span>
 
        <span class="kw4">int</span> maxLength <span class="sy0">=</span> <span class="br0">(</span>displayText.<span class="me1">indexOf</span><span class="br0">(</span><span class="st0">"."</span><span class="br0">)</span> <span class="sy0">&gt;=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">?</span> <span class="nu0">21</span> <span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">;</span>
        <span class="kw1">if</span><span class="br0">(</span>displayText.<span class="me1">length</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">+</span> valueString.<span class="me1">length</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">&lt;=</span> maxLength<span class="br0">)</span><span class="br0">{</span>
            displayText <span class="sy0">+=</span> valueString<span class="sy0">;</span>
            clearError<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
            setError<span class="br0">(</span><span class="st0">"Reached the 20 digit max"</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
 
        lcdDisplay.<span class="me1">setText</span><span class="br0">(</span>displayText<span class="br0">)</span><span class="sy0">;</span>
        status <span class="sy0">=</span> VALID<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw4">void</span> operatorButtonPressed<span class="br0">(</span><span class="kw4">int</span> newOperation<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">Double</span> displayValue <span class="sy0">=</span> <span class="kw3">Double</span>.<span class="me1">valueOf</span><span class="br0">(</span>lcdDisplay.<span class="me1">getText</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
        <span class="kw1">if</span><span class="br0">(</span>newOperation <span class="sy0">==</span> Operator.<span class="me1">EQUALS</span> <span class="sy0">&amp;&amp;</span> previousOperation <span class="sy0">!=</span> Operator.<span class="me1">EQUALS</span><span class="br0">)</span><span class="br0">{</span>
            operatorButtonPressed<span class="br0">(</span>previousOperation<span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
            <span class="kw1">switch</span> <span class="br0">(</span>previousOperation<span class="br0">)</span> <span class="br0">{</span>
                <span class="kw1">case</span> Operator.<span class="me1">PLUS</span><span class="sy0">:</span>
                    displayValue <span class="sy0">+=</span> lastValue<span class="sy0">;</span>
                    commitOperation<span class="br0">(</span>newOperation, displayValue<span class="br0">)</span><span class="sy0">;</span>
                    <span class="kw1">break</span><span class="sy0">;</span>
                <span class="kw1">case</span> Operator.<span class="me1">MINUS</span><span class="sy0">:</span>
                    displayValue <span class="sy0">-=</span> lastValue<span class="sy0">;</span>
                    commitOperation<span class="br0">(</span>newOperation, displayValue<span class="br0">)</span><span class="sy0">;</span>
                    <span class="kw1">break</span><span class="sy0">;</span>
                <span class="kw1">case</span> Operator.<span class="me1">MULTIPLY</span><span class="sy0">:</span>
                    displayValue <span class="sy0">*=</span> displayValue<span class="sy0">;</span>
                    commitOperation<span class="br0">(</span>newOperation, displayValue<span class="br0">)</span><span class="sy0">;</span>
                    <span class="kw1">break</span><span class="sy0">;</span>
                <span class="kw1">case</span> Operator.<span class="me1">DIVIDE</span><span class="sy0">:</span>
                    <span class="kw1">if</span> <span class="br0">(</span>displayValue <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
                        setError<span class="br0">(</span><span class="st0">"ERROR: Division by Zero"</span><span class="br0">)</span><span class="sy0">;</span>
                    <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
                        displayValue <span class="sy0">/=</span> lastValue<span class="sy0">;</span>
                        commitOperation<span class="br0">(</span>newOperation, displayValue<span class="br0">)</span><span class="sy0">;</span>
                    <span class="br0">}</span>
                    <span class="kw1">break</span><span class="sy0">;</span>
                <span class="kw1">case</span> Operator.<span class="me1">EQUALS</span><span class="sy0">:</span>
                    commitOperation<span class="br0">(</span>newOperation, displayValue<span class="br0">)</span><span class="sy0">;</span>
            <span class="br0">}</span>
        <span class="br0">}</span>
    <span class="br0">}</span>
 
    <span class="kw1">public</span> <span class="kw4">void</span> decimalButtonPressed<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw3">String</span> displayText <span class="sy0">=</span> lcdDisplay.<span class="me1">getText</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">if</span> <span class="br0">(</span>FIRST.<span class="me1">equals</span><span class="br0">(</span>status<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
            displayText <span class="sy0">=</span> <span class="st0">"0"</span><span class="sy0">;</span>
        <span class="br0">}</span>
 
        <span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span>displayText.<span class="me1">contains</span><span class="br0">(</span><span class="st0">"."</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span>
            displayText <span class="sy0">=</span> displayText <span class="sy0">+</span> <span class="st0">"."</span><span class="sy0">;</span>
        <span class="br0">}</span>
        lcdDisplay.<span class="me1">setText</span><span class="br0">(</span>displayText<span class="br0">)</span><span class="sy0">;</span>
        status <span class="sy0">=</span> VALID<span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw4">void</span> setError<span class="br0">(</span><span class="kw3">String</span> errorMessage<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">if</span><span class="br0">(</span>errorMessage.<span class="me1">trim</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">equals</span><span class="br0">(</span><span class="st0">""</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span>
            errorMessage <span class="sy0">=</span> <span class="st0">" "</span><span class="sy0">;</span>
        <span class="br0">}</span>
        errorDisplay.<span class="me1">setText</span><span class="br0">(</span>errorMessage<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw4">void</span> clearError<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
        status <span class="sy0">=</span> FIRST<span class="sy0">;</span>
        errorDisplay.<span class="me1">setText</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">private</span> <span class="kw4">void</span> commitOperation<span class="br0">(</span><span class="kw4">int</span> operation, <span class="kw4">double</span> result<span class="br0">)</span> <span class="br0">{</span>
        status <span class="sy0">=</span> FIRST<span class="sy0">;</span>
        lastValue <span class="sy0">=</span> result<span class="sy0">;</span>
        previousOperation <span class="sy0">=</span> operation<span class="sy0">;</span>
        lcdDisplay.<span class="me1">setText</span><span class="br0">(</span><span class="kw3">String</span>.<span class="me1">valueOf</span><span class="br0">(</span>result<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
 
    <span class="co3">/**
     * Resets the program state.
     */</span>
    <span class="kw4">void</span> resetState<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        clearError<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        lastValue <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
        previousOperation <span class="sy0">=</span> Operator.<span class="me1">EQUALS</span><span class="sy0">;</span>
 
        lcdDisplay.<span class="me1">setText</span><span class="br0">(</span><span class="st0">"0"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><a rel="nofollow" class="external text" href="http://ultrastudio.org/en/Software_calculator">Here</a> you can find the similar calculator running on a web like Java applet, with source code and code review available.</p>





</div>				
								
				
				
												
								
												
				
				
								<div class="visualClear"></div>
				
								
			</div>
			</div></body></html>