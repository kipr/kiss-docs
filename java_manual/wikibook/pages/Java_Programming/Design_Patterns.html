<html><head><title>Java Programming/Design Patterns</title><link media="all" href="../../misc/modern.css" type="text/css" rel="stylesheet"></head><body class="mediawiki"><div id="content"><h1 class="firstHeading" id="firstHeading">Java Programming/Design Patterns</h1><div id="bodyContent">
								
				
				
								
				
				
																
				
				
								
				<div lang="en" dir="ltr" class="mw-content-ltr"><p>A design pattern is not a finished design, it is a description of a solution to a common problem. A design pattern can be reused in multiple applications, and that is the main advantage of using it. It can also be seen as a template for how to solve a problem that can occur in many different situations and/or applications. It is not code reuse as it usually does not specify code, but code can be easily created from a design pattern. Object-oriented design patterns typically show relationships and interactions between classes or objects, without specifying the final application classes or objects that are involved.</p>
<p>Each design pattern consist of the following part:</p>
<dl><dt>Problem/requirement&#160;</dt>
<dd>To create a design pattern, we need to go through a mini analysis design and may be coding to test out the solution. This section state the requirements the problem we want to solve. This is usually a common problem that will occur in more than one application.</dd>
</dl><dl><dt>Forces&#160;</dt>
<dd>This section state the technological boundaries, that helps and guides the creation of the solution.</dd>
</dl><dl><dt>Solution&#160;</dt>
<dd>This section describes how to write the code to solve the above problem. This is the design part of the design pattern. It may contain class diagrams, sequence diagrams, and or whatever is needed to describe how to code the solution.</dd>
</dl><p>A design pattern can be considered as block that can be placed in your design document, and you have to implement the design pattern with your application.</p>
<p>Using design patterns speeds up your design and helps to communicate your design to other team members.</p>
<table id="toc" class="toc"><tr><td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul><li class="toclevel-1 tocsection-1"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Creational_Patterns"><span class="tocnumber">1</span> <span class="toctext">Creational Patterns</span></a>
<ul><li class="toclevel-2 tocsection-2"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Builder"><span class="tocnumber">1.1</span> <span class="toctext">Builder</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Factory_Method"><span class="tocnumber">1.2</span> <span class="toctext">Factory Method</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Abstract_Factory"><span class="tocnumber">1.3</span> <span class="toctext">Abstract Factory</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Prototype"><span class="tocnumber">1.4</span> <span class="toctext">Prototype</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Singleton"><span class="tocnumber">1.5</span> <span class="toctext">Singleton</span></a>
<ul><li class="toclevel-3 tocsection-7"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Singleton_.26_Multi_Threading"><span class="tocnumber">1.5.1</span> <span class="toctext">Singleton &amp; Multi Threading</span></a></li>
</ul></li>
</ul></li>
<li class="toclevel-1 tocsection-8"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Structural_Patterns"><span class="tocnumber">2</span> <span class="toctext">Structural Patterns</span></a>
<ul><li class="toclevel-2 tocsection-9"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Adapter"><span class="tocnumber">2.1</span> <span class="toctext">Adapter</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Bridge"><span class="tocnumber">2.2</span> <span class="toctext">Bridge</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Composite"><span class="tocnumber">2.3</span> <span class="toctext">Composite</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Decorator"><span class="tocnumber">2.4</span> <span class="toctext">Decorator</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Facade"><span class="tocnumber">2.5</span> <span class="toctext">Facade</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Flyweight"><span class="tocnumber">2.6</span> <span class="toctext">Flyweight</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Proxy"><span class="tocnumber">2.7</span> <span class="toctext">Proxy</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-16"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Behavioral_Patterns"><span class="tocnumber">3</span> <span class="toctext">Behavioral Patterns</span></a>
<ul><li class="toclevel-2 tocsection-17"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Chain_of_Responsibility"><span class="tocnumber">3.1</span> <span class="toctext">Chain of Responsibility</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Command"><span class="tocnumber">3.2</span> <span class="toctext">Command</span></a>
<ul><li class="toclevel-3 tocsection-19"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Scope"><span class="tocnumber">3.2.1</span> <span class="toctext">Scope</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Purpose"><span class="tocnumber">3.2.2</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Intent"><span class="tocnumber">3.2.3</span> <span class="toctext">Intent</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Applicability"><span class="tocnumber">3.2.4</span> <span class="toctext">Applicability</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Structure"><span class="tocnumber">3.2.5</span> <span class="toctext">Structure</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Consequences"><span class="tocnumber">3.2.6</span> <span class="toctext">Consequences</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Implementation"><span class="tocnumber">3.2.7</span> <span class="toctext">Implementation</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Command_in_Java"><span class="tocnumber">3.2.8</span> <span class="toctext">Command in Java</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Undo_in_Java"><span class="tocnumber">3.2.9</span> <span class="toctext">Undo in Java</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-28"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Interpreter"><span class="tocnumber">3.3</span> <span class="toctext">Interpreter</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Iterator"><span class="tocnumber">3.4</span> <span class="toctext">Iterator</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Mediator"><span class="tocnumber">3.5</span> <span class="toctext">Mediator</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Memento_.2F_Serialize"><span class="tocnumber">3.6</span> <span class="toctext">Memento / Serialize</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Observer"><span class="tocnumber">3.7</span> <span class="toctext">Observer</span></a>
<ul><li class="toclevel-3 tocsection-33"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Scope_2"><span class="tocnumber">3.7.1</span> <span class="toctext">Scope</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Purpose_2"><span class="tocnumber">3.7.2</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Intent_2"><span class="tocnumber">3.7.3</span> <span class="toctext">Intent</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Applicability_2"><span class="tocnumber">3.7.4</span> <span class="toctext">Applicability</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Structure_2"><span class="tocnumber">3.7.5</span> <span class="toctext">Structure</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Consequences_2"><span class="tocnumber">3.7.6</span> <span class="toctext">Consequences</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Implementation_2"><span class="tocnumber">3.7.7</span> <span class="toctext">Implementation</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Related_pattern"><span class="tocnumber">3.7.8</span> <span class="toctext">Related pattern</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Description"><span class="tocnumber">3.7.9</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Observer_in_Java"><span class="tocnumber">3.7.10</span> <span class="toctext">Observer in Java</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-43"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#State"><span class="tocnumber">3.8</span> <span class="toctext">State</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Strategy"><span class="tocnumber">3.9</span> <span class="toctext">Strategy</span></a>
<ul><li class="toclevel-3 tocsection-45"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Scope_3"><span class="tocnumber">3.9.1</span> <span class="toctext">Scope</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Purpose_3"><span class="tocnumber">3.9.2</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Intent_3"><span class="tocnumber">3.9.3</span> <span class="toctext">Intent</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Applicability_3"><span class="tocnumber">3.9.4</span> <span class="toctext">Applicability</span></a></li>
<li class="toclevel-3 tocsection-49"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Structure_3"><span class="tocnumber">3.9.5</span> <span class="toctext">Structure</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Consequences_3"><span class="tocnumber">3.9.6</span> <span class="toctext">Consequences</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Implementation_3"><span class="tocnumber">3.9.7</span> <span class="toctext">Implementation</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Related_patterns"><span class="tocnumber">3.9.8</span> <span class="toctext">Related patterns</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Description_2"><span class="tocnumber">3.9.9</span> <span class="toctext">Description</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-54"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Template_Method"><span class="tocnumber">3.10</span> <span class="toctext">Template Method</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Design_Patterns&amp;printable=yes#Visitor"><span class="tocnumber">3.11</span> <span class="toctext">Visitor</span></a></li>
</ul></li>
</ul></td>
</tr></table><h1> <span class="mw-headline" id="Creational_Patterns">Creational Patterns</span></h1>
<h2> <span class="mw-headline" id="Builder">Builder</span></h2>
<p>Separate the construction of a complex object from its representation so that the same construction process can create different representations.</p>
<h2> <span class="mw-headline" id="Factory_Method">Factory Method</span></h2>
<dl><dt>problem&#160;</dt>
<dd>We want to decide at run time what object is to be created based on some configuration or application parameter. When we write the code we do not know what class should be instantiated.</dd>
</dl><dl><dt>Solution&#160;</dt>
<dd>Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.</dd>
</dl><h2> <span class="mw-headline" id="Abstract_Factory">Abstract Factory</span></h2>
<p>Provide an interface for creating families of related or dependent objects without specifying their concrete classes.</p>
<h2> <span class="mw-headline" id="Prototype">Prototype</span></h2>
<p>Specify the kinds of objects to create using a prototypical instance, and create new objects by copying this prototype.</p>
<h2> <span class="mw-headline" id="Singleton">Singleton</span></h2>
<p>The term <b>Singleton</b> refers to an object that can be instantiated only once.</p>
<p>Use the Singleton Design pattern if:</p>
<ul><li>You need global access to a resource, like logging ...</li>
<li>You need only one instance of a utility class, do not want to create lots of objects.</li>
</ul><p><br></p>
<dl><dt>Refresh Java object creation&#160;</dt>
</dl><p>In programming languages like Java, you have to create an instance of an object type (commonly called a Class) to use it throughout the code. Let's take for example this code:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 Animal dog<span class="sy0">;</span>                  <span class="co1">// Declaring the object type</span>
 dog <span class="sy0">=</span> <span class="kw1">new</span> Animal<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>          <span class="co1">// Instantiating an object</span>
</pre></div>
</div>
<p>This can also be written in a single line to save space.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 Animal dog <span class="sy0">=</span> <span class="kw1">new</span> Animal<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>   <span class="co1">// Both declaring and instantiating</span>
</pre></div>
</div>
<p>At times, you need more than one instance of the same object type. You can create multiple instances of the same object type. Take for instance:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
Animal dog <span class="sy0">=</span> <span class="kw1">new</span> Animal<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
Animal cat <span class="sy0">=</span> <span class="kw1">new</span> Animal<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
</pre></div>
</div>
<p>Now that I have two instances of the same object type, I can use both <code>dog</code> and <code>cat</code> instances separately in my program. Any changes to <code>dog</code> would not effect the <code>cat</code> instance because both of them have been created in separate memory spaces. To see whether these objects actually are different we do something like this:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span> <span class="br0">(</span>dog <span class="sy0">==</span> cat<span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span>  <span class="co1">// output: false</span>
</pre></div>
</div>
<p>The code returns <code>false</code> because both the objects are different. Contrary to this behavior, the <b>Singleton</b> behaves differently. A Singleton object type can not be instantiated yet you can obtain an instance of the object type. Let us create a normal object using Java.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> NormalObject <span class="br0">{</span>
     <span class="kw1">public</span> NormalObject<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>What we have done here is that we have created a class (object type) to identify our object. Within the parenthesis of the class is a single method with the same name as that of the class (methods can be identified by the usage of brackets at the end of their names). Methods that have the same name as that of the class and that do not have a return type are called <b>Constructors</b> in OOP syntax. To create an instance of the class, the code can not be much simpler.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> TestHarness <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
          NormalObject object <span class="sy0">=</span> <span class="kw1">new</span> NormalObject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>Note that to encourage the instantiation of this object, the constructor is called. The constructor as in this case can be called outside the class paranthesis and into another class definition because it is declared a public accessor while creating the Constructor in the above example.</p>
<dl><dt>Creating singleton object&#160;</dt>
</dl><p>Now we will create the Singleton object. You just have to change one thing to adhere to the Singleton design pattern: Make your Constructor's accessor <i>private</i>.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> SingletonObject <span class="br0">{</span>
     <span class="kw1">private</span> SingletonObject<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>Notice the constructor's accessor. This time around it has been declared <b>private</b>. Just by changing it to private, you have applied a great change to your object type. Now you can not instantiate the object type. Go ahead try out the following code.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> TestHarness <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
          SingletonObject object <span class="sy0">=</span> <span class="kw1">new</span> SingletonObject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>The code returns an error because private class members can not be accessed from outside the class itself and in another class. This way you have disabled the instantiation process for an object type. However, you have to find a way of obtaining an instance of the object type. Let's do some changes here.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> SingletonObject <span class="br0">{</span>
     <span class="kw1">private</span> <span class="kw1">static</span>  SingletonObject object<span class="sy0">;</span>
 
     <span class="kw1">private</span> SingletonObject<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="co1">//Instanciate the object.</span>
     <span class="br0">}</span>
 
     <span class="kw1">public</span> <span class="kw1">static</span> SingletonObject getInstance<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
         <span class="kw1">if</span> <span class="br0">(</span>object <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">)</span> <span class="br0">{</span>
             object <span class="sy0">=</span> <span class="kw1">new</span> SingletonObject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// Create the object for the first and last time</span>
         <span class="br0">}</span>
         <span class="kw1">return</span> object<span class="sy0">;</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>The changes involve adding a static class member called <b><code>object</code></b> and a <code>public static</code> method that can be accessible outside the scope of the class by using the name of the Class. To see how we can obtain the instance, lets code:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> TestHarness <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
          SingletonObject object <span class="sy0">=</span> SingletonObject.<span class="me1">getInstance</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>This way you control the creation of objects derived from your class. But we have still not unearthed the final and interesting part of the whole process. Try creating multiple instances and see what happens.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> TestHarness <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
          SingletonObject object1 <span class="sy0">=</span> SingletonObject.<span class="me1">getInstance</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
          SingletonObject object2 <span class="sy0">=</span> SingletonObject.<span class="me1">getInstance</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>Unlike multiple instances of normal object types, multiple instances of a Singleton are all actually the same object instance. To validate the concept in Java, we try:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span> <span class="br0">(</span>object1 <span class="sy0">==</span> object2<span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span> <span class="co1">// output: true</span>
</pre></div>
</div>
<p>The code returns <code>true</code> because both object declarations are actually refering to the same object. So, in summarizing the whole concept, a Singleton can be defined as an object that can not be instantiated more than once. Typically it is obtained using a static custom implementation.</p>
<p>In some applications, it is appropriate to enforce a single instance of an object, for example: window managers, print spoolers, database access, and filesystems</p>
<h5> <span class="mw-headline" id="Singleton_.26_Multi_Threading">Singleton &amp; Multi Threading</span></h5>
<p>Java uses multi threading concept, to run/execute any program. Consider the class SingletonObject discussed above. Call to the method getInstance() by more than one thread at any point of time might create two instances of SingletonObject thus defeating the whole purpose of creating the singleton pattern. To make singelton thread safe, we have three options:</p>
<p>1. Synchronize the method getInstance, which would look like:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
   <span class="co1">// --- Only one thread can enter and stay in this method at a time ---</span>
   <span class="kw1">public</span> <span class="kw1">synchronized</span> <span class="kw1">static</span> Singleton getInstance<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span> instance <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span>
            instance <span class="sy0">=</span> <span class="kw1">new</span> Singleton<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
        <span class="kw1">return</span> instance<span class="sy0">;</span>
    <span class="br0">}</span>
</pre></div>
</div>
<p>Synchronizing the method guarantees that a call to the method cannot be interrupted. The problem with the above code is that 'synchronization' is expensive. So practically the above code should neve be used.</p>
<p>2. Another approach would be to create a singleton instance as shown below:</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> SingletonObject <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">final</span> <span class="kw1">static</span> SingletonObject object<span class="sy0">;</span>
     <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw3">String</span> lockObj <span class="sy0">=</span> <span class="st0">"Lock"</span><span class="sy0">;</span> <span class="co1">// -- Use for locking --</span>
 
     <span class="kw1">private</span> SingletonObject<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="co1">//Exists Just to avoid instantiation.</span>
     <span class="br0">}</span>
 
     <span class="kw1">public</span> <span class="kw1">static</span> SingletonObject getInstance<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
         <span class="kw1">if</span> <span class="br0">(</span> object <span class="sy0">!=</span> <span class="kw2">null</span> <span class="br0">)</span> <span class="br0">{</span>
             <span class="kw1">return</span> object<span class="sy0">;</span>
         <span class="br0">}</span>
         <span class="kw1">else</span> <span class="br0">{</span>
            <span class="co1">// --- Start a synchronized block, only one thread can enter and stay in the block one at a time --</span>
            <span class="kw1">synchronized</span><span class="br0">(</span>lockObj<span class="br0">)</span> <span class="br0">{</span>
                <span class="kw1">if</span> <span class="br0">(</span> object <span class="sy0">==</span> <span class="kw2">null</span> <span class="br0">)</span>
                <span class="br0">{</span> 
                   object <span class="sy0">=</span> <span class="kw1">new</span> SingletonObject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
                <span class="br0">}</span>
            <span class="br0">}</span> <span class="co1">// --- End of synchronized block ---</span>
            <span class="kw1">return</span> object<span class="sy0">;</span>
         <span class="br0">}</span>
     <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>The above code will be much faster; once the singleton instance is created no syncronization is needed, it just returns the same instance reference.</p>
<p>3. Use static initialization block to create the instance. The JVM makes sure that the static block is executed once when the class is loaded.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> SingletonObject <span class="br0">{</span>
     <span class="kw1">public</span> <span class="kw1">final</span> <span class="kw1">static</span> SingletonObject object<span class="sy0">;</span>
 
     <span class="kw1">static</span> <span class="br0">{</span>
        ...
        <span class="me1">object</span> <span class="sy0">=</span> <span class="kw1">new</span> SingletonObject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="br0">}</span>
 
     <span class="kw1">private</span> SingletonObject<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="co1">//Exists Just to avoid instantiation.</span>
     <span class="br0">}</span>
 
     <span class="kw1">public</span> <span class="kw1">static</span> SingletonObject getInstance<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
         <span class="kw1">return</span> object<span class="sy0">;</span>
     <span class="br0">}</span>     
 <span class="br0">}</span>
</pre></div>
</div>
<h1> <span class="mw-headline" id="Structural_Patterns">Structural Patterns</span></h1>
<h2> <span class="mw-headline" id="Adapter">Adapter</span></h2>
<p>Convert the interface of a class into another interface clients expect. Adapter lets classes work together that couldn't otherwise because of incompatible interfaces.</p>
<h2> <span class="mw-headline" id="Bridge">Bridge</span></h2>
<p>The Bridge Pattern is used to separate out the interface from its implementation. Doing this gives the flexibility so that both can vary independently.</p>
<h2> <span class="mw-headline" id="Composite">Composite</span></h2>
<p>Components that are individual objects and also can be collection of objects. A Composite pattern can represent both the conditions. In this pattern, one can develop tree structures for representing part-whole hierarchies.</p>
<h2> <span class="mw-headline" id="Decorator">Decorator</span></h2>
<p>The decorator pattern helps to add behavior or responsibilities to an object. This is also called &#8220;Wrapper&#8221;.</p>
<h2> <span class="mw-headline" id="Facade">Facade</span></h2>
<p>A Facade pattern hides the complexities of the system and provides an interface to the client from where the client can access the system.</p>
<p>Dividing a system into subsystems helps reduce complexity. We need to minimize the communication and dependencies between subsystems. For this, we introduce a facade object that provides a single, simplified interface to the more general facilities of a subsystem.</p>
<h2> <span class="mw-headline" id="Flyweight">Flyweight</span></h2>
<p>It is a mechanism by which you can avoid creating a large number of object instances to represent the entire system. To decide if some part of a program is a candidate for using Flyweights, consider whether it is possible to remove some data from the class and make it extrinsic.</p>
<h2> <span class="mw-headline" id="Proxy">Proxy</span></h2>
<p>It is used when you need to represent a complex with a simpler one. If creation of object is expensive, its creation can be postponed till the very need arises and till then, a simple object can represent it. This simple object is called the &#8220;Proxy&#8221; for the complex object.</p>
<h1> <span class="mw-headline" id="Behavioral_Patterns">Behavioral Patterns</span></h1>
<h2> <span class="mw-headline" id="Chain_of_Responsibility">Chain of Responsibility</span></h2>
<h2> <span class="mw-headline" id="Command">Command</span></h2>
<h5> <span class="mw-headline" id="Scope">Scope</span></h5>
<p>Object</p>
<h5> <span class="mw-headline" id="Purpose">Purpose</span></h5>
<p>Behavioural</p>
<h5> <span class="mw-headline" id="Intent">Intent</span></h5>
<p>encapsulate the request for a service as an object</p>
<h5> <span class="mw-headline" id="Applicability">Applicability</span></h5>
<ul><li>to parameterize objects with an action to perform</li>
<li>to specify, queue, and execute requests at different times</li>
<li>for a history of requests</li>
<li>for multilevel undo/redo</li>
</ul><h5> <span class="mw-headline" id="Structure">Structure</span></h5>
<p><a href="http://en.wikibooks.org/wiki/File:Command.jpg" class="image"><img alt="Command.jpg" src="../../thumbs/f88eb_Command.jpg" width="786" height="278"></a></p>
<h5> <span class="mw-headline" id="Consequences">Consequences</span></h5>
<ul><li>+ abstracts executor of a service</li>
<li>+ supports arbitrary-level undo-redo</li>
<li>+ composition yields macro-commands</li>
<li>- might result in lots of trivial command subclasses</li>
</ul><h5> <span class="mw-headline" id="Implementation">Implementation</span></h5>
<ul><li>copying a command before putting it on a history list</li>
<li>handling hysteresis</li>
<li>supporting transactions</li>
</ul><p>Command pattern is an Object behavioural pattern that decouples sender and receiver. It can also be thought as an object oriented equivalent of call back method.</p>
<p>Call Back: It is a function that is registered to be called at later point of time based on user actions.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">public</span> <span class="kw1">interface</span> Command<span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw4">int</span> execute<span class="br0">(</span><span class="kw4">int</span> a, <span class="kw4">int</span> b<span class="br0">)</span><span class="sy0">;</span>
 <span class="br0">}</span>
 
 <span class="kw1">public</span> <span class="kw1">class</span> AddCommand <span class="kw1">implements</span> Command<span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw4">int</span> execute<span class="br0">(</span><span class="kw4">int</span> a, <span class="kw4">int</span> b<span class="br0">)</span><span class="br0">{</span>
      <span class="kw1">return</span> a <span class="sy0">+</span> b<span class="sy0">;</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="kw1">public</span> <span class="kw1">class</span> MultCommand <span class="kw1">implements</span> Command<span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw4">int</span> execute<span class="br0">(</span><span class="kw4">int</span> a, <span class="kw4">int</span> b<span class="br0">)</span><span class="br0">{</span>
      <span class="kw1">return</span> a <span class="sy0">*</span> b<span class="sy0">;</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="kw1">public</span> <span class="kw1">class</span> TestCommand<span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span> a<span class="br0">[</span><span class="br0">]</span><span class="br0">)</span><span class="br0">{</span>
     Command add <span class="sy0">=</span> <span class="kw1">new</span> AddCommand<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     add.<span class="me1">execute</span><span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// returns 3</span>
     Command multiply <span class="sy0">=</span> <span class="kw1">new</span> MultCommand<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     multiply.<span class="me1">execute</span><span class="br0">(</span><span class="nu0">2</span>,<span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// returns 6</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>In the above example, it can be noted that the command pattern decouples the object that invokes the operation from the ones having the knowledge to perform it. --<a href="http://en.wikibooks.org/wiki/User:Pupeer" title="User:Pupeer">Peer Mohamed P U</a> 11:53, 1 March 2006 (UTC)</p>
<h5> <span class="mw-headline" id="Command_in_Java">Command in Java</span></h5>
<p>Menus and buttons provide a classic example of the need for the COMMAND pattern. When you add a menu to an application, you have to configure the menu with words that describe actions that the user can choose, such as Save and Open. Similarly for a button. You also have to configure the menu or button so that it can take action, calling a method in response to a user's click. However, JMenuItem or JButton class has no way of knowing what action to perform when an item or button is selected. In the following example we use the same Action for both a menu item and a button saving us from having to write the same code twice.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw3">Action</span> actionOpen <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">AbstractAction</span><span class="br0">(</span><span class="st0">"Open..."</span>, iconOpen<span class="br0">)</span> <span class="br0">{</span> 
      <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
       ...    <span class="co1">// open a file</span>
      <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="kw3">JMenu</span> mFile <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JMenu</span><span class="br0">(</span><span class="st0">"File"</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="kw3">JMenuItem</span> item <span class="sy0">=</span>  mFile.<span class="me1">add</span><span class="br0">(</span>actionOpen<span class="br0">)</span><span class="sy0">;</span>   <span class="co1">// use the same action for both a menu item ...</span>
 
 <span class="kw3">JToolBar</span> m_toolBar <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JToolBar</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="kw3">JButton</span> bOpen <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span><span class="br0">(</span>actionOpen<span class="br0">)</span><span class="sy0">;</span>   <span class="co1">// ... and a button</span>
 m_toolBar.<span class="me1">add</span><span class="br0">(</span>bOpen<span class="br0">)</span><span class="sy0">;</span>
</pre></div>
</div>
<p>Java Swing applications commonly apply the MEDIATOR pattern, registering a single object to receive all GUI events. This object mediates the interaction of the components and translates user input into commands for business domain objects</p>
<h5> <span class="mw-headline" id="Undo_in_Java">Undo in Java</span></h5>
<p>Swing provides for Undo/Redo functionality.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">import</span> <span class="co2">javax.swing.undo.*</span><span class="sy0">;</span>
 
 <span class="kw3">UndoManager</span> undoManager <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">UndoManager</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
 <span class="kw3">Action</span> undoAction, redoAction<span class="sy0">;</span>
 undoAction <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">AbstractAction</span><span class="br0">(</span><span class="st0">"Undo"</span>,    
     <span class="kw1">new</span> <span class="kw3">ImageIcon</span><span class="br0">(</span><span class="st0">"edit_undo.gif"</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span> 
      <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> e<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">try</span> <span class="br0">{</span>
          undoManager.<span class="me1">undo</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// undoManager.redo();</span>
        <span class="br0">}</span> 
        <span class="kw1">catch</span> <span class="br0">(</span><span class="kw3">CannotUndoException</span> ex<span class="br0">)</span> <span class="br0">{</span>
          <span class="kw3">System</span>.<span class="me1">err</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Unable to undo: "</span> <span class="sy0">+</span> ex<span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
        updateUndo<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
 <span class="co1">// same for Redo</span>
 
 <span class="kw1">protected</span> <span class="kw4">void</span> updateUndo<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">if</span><span class="br0">(</span>undo.<span class="me1">canUndo</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
      undoAction.<span class="me1">setEnabled</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
      undoAction.<span class="me1">putValue</span><span class="br0">(</span><span class="kw3">Action</span>.<span class="me1">NAME</span>, undo.<span class="me1">getUndoPresentationName</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
      undoAction.<span class="me1">setEnabled</span><span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy0">;</span>
      undoAction.<span class="me1">putValue</span><span class="br0">(</span><span class="kw3">Action</span>.<span class="me1">NAME</span>, <span class="st0">"Undo"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">if</span><span class="br0">(</span>undo.<span class="me1">canRedo</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
      redoAction.<span class="me1">setEnabled</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span><span class="sy0">;</span>
      redoAction.<span class="me1">putValue</span><span class="br0">(</span><span class="kw3">Action</span>.<span class="me1">NAME</span>, undo.<span class="me1">getRedoPresentationName</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span>
      redoAction.<span class="me1">setEnabled</span><span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy0">;</span>
      redoAction.<span class="me1">putValue</span><span class="br0">(</span><span class="kw3">Action</span>.<span class="me1">NAME</span>, <span class="st0">"Redo"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
</pre></div>
</div>
<h2> <span class="mw-headline" id="Interpreter">Interpreter</span></h2>
<p>Given a language, define a representation for its grammar along with an interpreter that uses the representation to interpret sentences in the language.</p>
<h2> <span class="mw-headline" id="Iterator">Iterator</span></h2>
<p>Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.</p>
<h2> <span class="mw-headline" id="Mediator">Mediator</span></h2>
<p>Define an object that encapsulates how a set of objects interact. Mediator promotes loose coupling by keeping objects from referring to each other explicitly, and it lets you vary their interaction independently</p>
<h2> <span class="mw-headline" id="Memento_.2F_Serialize">Memento / Serialize</span></h2>
<p>Persisting object is a memento Pattern.</p>
<h2> <span class="mw-headline" id="Observer">Observer</span></h2>
<h5> <span class="mw-headline" id="Scope_2">Scope</span></h5>
<p>Object</p>
<h5> <span class="mw-headline" id="Purpose_2">Purpose</span></h5>
<p>Behavioural</p>
<h5> <span class="mw-headline" id="Intent_2">Intent</span></h5>
<p>define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically</p>
<h5> <span class="mw-headline" id="Applicability_2">Applicability</span></h5>
<ul><li>when an abstraction has two aspects, one dependent on the other</li>
<li>when a change to one object requires changing others, and you don't know how many objects need to be changed</li>
<li>when an object should notify other objects without making assumptions about who these objects are</li>
</ul><h5> <span class="mw-headline" id="Structure_2">Structure</span></h5>
<p><a href="http://en.wikibooks.org/wiki/File:Observer-structure.jpg" class="image"><img alt="Observer-structure.jpg" src="../../thumbs/5181c_Observer-structure.jpg" width="802" height="283"></a></p>
<h5> <span class="mw-headline" id="Consequences_2">Consequences</span></h5>
<ul><li>+ modularity: subject and observers may vary independently</li>
<li>+ extensibility: can define and add any number of observers</li>
<li>+ customizability: different observers provide different views of subject</li>
<li>- unexpected updates: observers don't know about each other</li>
<li>- update overhead: might need hints</li>
</ul><h5> <span class="mw-headline" id="Implementation_2">Implementation</span></h5>
<ul><li>subject-observer mapping</li>
<li>dangling references</li>
<li>avoiding observer-specific update protocols: the push and pull models</li>
<li>registering modifications of interest explicitly</li>
</ul><h5> <span class="mw-headline" id="Related_pattern">Related pattern</span></h5>
<ul><li>Singleton[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#Singleton">[1]</a>], is used to make observable object unique and accessible globally.</li>
<li>Mediator[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#Mediator">[2]</a>], is used to encapsulate updated objects</li>
</ul><h5> <span class="mw-headline" id="Description">Description</span></h5>
<dl><dt>Problem&#160;</dt>
<dd>In one place or many places in the application we need to be aware about a system event or an application state change. We'd like to have a standard way of subscribing to listening for system events and a standard way of notifying the interested parties. The notification should be automated after an interested party subscribed to the system event or application state change. There should be a way to unsubscribe, too.</dd>
</dl><dl><dt>Forces&#160;</dt>
<dd>Observers and observables probably should be represented by objects. The observer objects will be notified by the observable objects.</dd>
</dl><dl><dt>Note&#160;</dt>
<dd>The Java JDK has a implementation of this pattern.</dd>
<dd>Application in Graphical User Interfaces such as in the AWK toolkit, Swing etc. In Swing, whenever a user clicks a button or adjusts a slider, many objects in the application may need to react to the change. Swing refers to interested clients (observers) as "listeners" and lets you register as many listeners as you like to be notified of a component's events.</dd>
</dl><p>MVC is more M(VC) in Swing, i.e. View and Controller are tightly coupled; Swing does not divide Views from Controllers. MVC supports n-tier development, i.e. loosely coupled layers (see below) that can change independently and that may even execute on different machines.</p>
<dl><dt>Solution&#160;</dt>
<dd>After subscribing the listening objects will be notified by a way of method call.</dd>
</dl><dl><dt>Loose coupling</dt>
<dd>when two objects are loosely coupled, they can interact, but they have very little knowledge of each other. Strive for loosely coupled designs between objects that interact.</dd>
</dl><ul><li>The only thing that Subject knows about an observer is that it implements a certain interface</li>
<li>We can add new observers at any time</li>
<li>We never need to modify the subject to add new types of observers</li>
<li>We can reuse subjects or observers independently of each other</li>
<li>Changes to either the subject or an observer will not affect the other</li>
</ul><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="co1">// Observer pattern -- Structural example </span>
 <span class="co1">// @since JDK 5.0 </span>
 <span class="kw1">import</span> <span class="co2">java.util.ArrayList</span><span class="sy0">;</span>
 <span class="co1">// "Subject"</span>
 <span class="kw1">abstract</span> <span class="kw1">class</span> Subject <span class="br0">{</span>
    <span class="co1">// Fields</span>
    <span class="kw1">private</span> ArrayList<span class="sy0">&lt;</span>Observer<span class="sy0">&gt;</span> observers <span class="sy0">=</span> <span class="kw1">new</span> ArrayList<span class="sy0">&lt;</span>Observer<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Methods</span>
    <span class="kw1">public</span> <span class="kw4">void</span> attach<span class="br0">(</span><span class="kw3">Observer</span> observer<span class="br0">)</span><span class="br0">{</span>
       observers.<span class="me1">add</span><span class="br0">(</span>observer<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">public</span> <span class="kw4">void</span> detach<span class="br0">(</span><span class="kw3">Observer</span> observer<span class="br0">)</span> <span class="br0">{</span>
       observers.<span class="me1">remove</span><span class="br0">(</span>observer<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">public</span> <span class="kw4">void</span> notifyObservers<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
       <span class="kw1">for</span> <span class="br0">(</span><span class="kw3">Observer</span> o <span class="sy0">:</span> observers<span class="br0">)</span>    
          o.<span class="me1">update</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="co1">// "ConcreteSubject"</span>
 <span class="kw1">class</span> ConcreteSubject <span class="kw1">extends</span> Subject <span class="br0">{</span>
  <span class="co1">// Fields</span>
  <span class="kw1">private</span> <span class="kw3">String</span> subjectState<span class="sy0">;</span>
  <span class="co1">// Properties</span>
  <span class="kw1">public</span> <span class="kw3">String</span> getSubjectState<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">return</span> subjectState<span class="sy0">;</span> 
  <span class="br0">}</span>
  <span class="kw1">public</span> <span class="kw4">void</span> setSubjectState <span class="br0">(</span><span class="kw3">String</span> value<span class="br0">)</span> <span class="br0">{</span> 
    subjectState <span class="sy0">=</span> value<span class="sy0">;</span> 
  <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="co1">// "Observer"</span>
 <span class="kw1">abstract</span> <span class="kw1">class</span> <span class="kw3">Observer</span> <span class="br0">{</span>
   <span class="co1">// Methods</span>
   <span class="kw1">abstract</span> <span class="kw1">public</span> <span class="kw4">void</span> update<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="br0">}</span>
 
 <span class="co1">// "ConcreteObserver"</span>
 <span class="kw1">class</span> ConcreteObserver <span class="kw1">extends</span> <span class="kw3">Observer</span><span class="br0">{</span>
  <span class="co1">// Fields</span>
  <span class="kw1">private</span> <span class="kw3">String</span> name<span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw3">String</span> observerState<span class="sy0">;</span>
  <span class="kw1">private</span> ConcreteSubject subject<span class="sy0">;</span>
 
  <span class="co1">// Constructors</span>
  <span class="kw1">public</span> ConcreteObserver <span class="br0">(</span>ConcreteSubject subject, <span class="kw3">String</span> name<span class="br0">)</span>  <span class="br0">{</span>
     <span class="kw1">this</span>.<span class="me1">subject</span> <span class="sy0">=</span> subject<span class="sy0">;</span>
     <span class="kw1">this</span>.<span class="me1">name</span> <span class="sy0">=</span> name<span class="sy0">;</span>
     <span class="co1">//subject.attach(this);</span>
  <span class="br0">}</span>
  <span class="co1">// Methods</span>
  <span class="kw1">public</span> <span class="kw4">void</span> update<span class="br0">(</span><span class="br0">)</span>  <span class="br0">{</span>
     observerState <span class="sy0">=</span> subject.<span class="me1">getSubjectState</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"Observer %s's new state is %s<span class="es0">\n</span>"</span>, name, observerState <span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="co1">// Client test</span>
 <span class="kw1">public</span> <span class="kw1">class</span> Client <span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
      <span class="co1">// Configure Observer structure</span>
      ConcreteSubject s <span class="sy0">=</span> <span class="kw1">new</span> ConcreteSubject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      s.<span class="me1">attach</span><span class="br0">(</span><span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"A"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
      s.<span class="me1">attach</span><span class="br0">(</span><span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"B"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
      s.<span class="me1">attach</span><span class="br0">(</span><span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"C"</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="co1">// Change subject and notify observers</span>
      s.<span class="me1">setSubjectState</span><span class="br0">(</span><span class="st0">"NEW"</span><span class="br0">)</span><span class="sy0">;</span>
      s.<span class="me1">notifyObservers</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<h5> <span class="mw-headline" id="Observer_in_Java">Observer in Java</span></h5>
<p>Java, however, has built in support for the Observer pattern. All one has to do is extend <code>java.util.Observable</code> (the <i>Subject</i>) and tell it when to notify the <code>java.util.Observer</code>s. The API does the rest for you. You may use either push or pull style of updating your observers.</p>
<p><a href="http://en.wikibooks.org/wiki/File:Observer-java.jpg" class="image"><img alt="Observer-java.jpg" src="../../thumbs/97263_Observer-java.jpg" width="739" height="545"></a></p>
<p><code>java.util.Observable</code> is a class while <code>java.util.Observer</code> is an interface</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">public</span> <span class="kw4">void</span> setValue<span class="br0">(</span><span class="kw4">double</span> value<span class="br0">)</span> <span class="br0">{</span> 
    <span class="kw1">this</span>.<span class="me1">value</span> <span class="sy0">=</span> value<span class="sy0">;</span> 
    setChanged<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
    notifyObservers<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
 <span class="br0">}</span>
</pre></div>
</div>
<p>Note that you <i>have</i> to call <code>setChanged()</code> so that the <code>Observable</code> code will broadcast the change. The <code>notifyObservers()</code> method calls the <code>update()</code> method of each registered observer. The <code>update()</code> method is a requirement for implementers of the <code>Observer</code> Interface.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="co1">// Observer pattern -- Structural example </span>
 <span class="kw1">import</span> <span class="co2">java.util.Observable</span><span class="sy0">;</span>
 <span class="kw1">import</span> <span class="co2">java.util.Observer</span><span class="sy0">;</span>
 <span class="co1">// "Subject"</span>
 <span class="kw1">class</span> ConcreteSubject <span class="kw1">extends</span> <span class="kw3">Observable</span> <span class="br0">{</span>
  <span class="co1">// Fields</span>
  <span class="kw1">private</span> <span class="kw3">String</span> subjectState<span class="sy0">;</span>
  <span class="co1">// Methods</span>
  <span class="kw1">public</span> <span class="kw4">void</span> dataChanged<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
     setChanged<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     notifyObservers<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>  <span class="co1">// use the pull method</span>
  <span class="br0">}</span>
  <span class="co1">// Properties</span>
  <span class="kw1">public</span> <span class="kw3">String</span> getSubjectState<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
     <span class="kw1">return</span> subjectState<span class="sy0">;</span> 
  <span class="br0">}</span>
  <span class="kw1">public</span> <span class="kw4">void</span> setSubjectState<span class="br0">(</span><span class="kw3">String</span> value<span class="br0">)</span> <span class="br0">{</span> 
      subjectState <span class="sy0">=</span> value<span class="sy0">;</span> 
      dataChanged<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="co1">// "ConcreteObserver"</span>
 <span class="kw1">import</span> <span class="co2">java.util.Observable</span><span class="sy0">;</span>
 <span class="kw1">import</span> <span class="co2">java.util.Observer</span><span class="sy0">;</span>
 <span class="kw1">class</span> ConcreteObserver <span class="kw1">implements</span> <span class="kw3">Observer</span> <span class="br0">{</span>
   <span class="co1">// Fields</span>
   <span class="kw1">private</span> <span class="kw3">String</span> name<span class="sy0">;</span>
   <span class="kw1">private</span> <span class="kw3">String</span> observerState<span class="sy0">;</span>
   <span class="kw1">private</span> <span class="kw3">Observable</span> subject<span class="sy0">;</span>
 
   <span class="co1">// Constructors</span>
   <span class="kw1">public</span> ConcreteObserver <span class="br0">(</span><span class="kw3">Observable</span> subject, <span class="kw3">String</span> name<span class="br0">)</span>  <span class="br0">{</span>
     <span class="kw1">this</span>.<span class="me1">subject</span> <span class="sy0">=</span> subject<span class="sy0">;</span>
     <span class="kw1">this</span>.<span class="me1">name</span> <span class="sy0">=</span> name<span class="sy0">;</span>
     subject.<span class="me1">addObserver</span><span class="br0">(</span><span class="kw1">this</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="co1">// Methods</span>
  <span class="kw1">public</span> <span class="kw4">void</span> update<span class="br0">(</span><span class="kw3">Observable</span> subject, <span class="kw3">Object</span> arg<span class="br0">)</span>  <span class="br0">{</span>
   <span class="kw1">if</span> <span class="br0">(</span>subject <span class="kw1">instanceof</span> ConcreteSubject<span class="br0">)</span> <span class="br0">{</span>
     ConcreteSubject subj <span class="sy0">=</span> <span class="br0">(</span>ConcreteSubject<span class="br0">)</span>subject<span class="sy0">;</span> 
     observerState <span class="sy0">=</span> subject.<span class="me1">getSubjectState</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
     <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"Observer %s's new state is %s<span class="es0">\n</span>"</span>, name, observerState <span class="br0">)</span><span class="sy0">;</span>
   <span class="br0">}</span>
  <span class="br0">}</span>
 <span class="br0">}</span>
 
 <span class="co1">// Client test</span>
 <span class="kw1">public</span> <span class="kw1">class</span> Client <span class="br0">{</span>
   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><span class="kw3">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
      <span class="co1">// Configure Observer structure</span>
      ConcreteSubject s <span class="sy0">=</span> <span class="kw1">new</span> ConcreteSubject<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"A"</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"B"</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw1">new</span> ConcreteObserver<span class="br0">(</span>s,<span class="st0">"C"</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="co1">// Change subject and notify observers</span>
      s.<span class="me1">setSubjectState</span><span class="br0">(</span><span class="st0">"NEW"</span><span class="br0">)</span><span class="sy0">;</span>
   <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>The Observer pattern is used extensively in Java. E.g. in the following piece of code</p>
<ul><li><code>button</code> is the Subject</li>
<li><code>MyListener</code> is the Observer</li>
<li><code>actionPerformed()</code> is the equivalent to <code>update()</code></li>
</ul><div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw3">JButton</span> button <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">JButton</span> <span class="br0">(</span><span class="st0">"Click me!"</span><span class="br0">)</span><span class="sy0">;</span>
 button.<span class="me1">addActionListener</span><span class="br0">(</span><span class="kw1">new</span> MyListener<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
 
 <span class="kw1">class</span> MyListener <span class="kw1">implements</span> <span class="kw3">ActionListener</span> <span class="br0">{</span>
    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">(</span><span class="kw3">ActionEvent</span> event<span class="br0">)</span> <span class="br0">{</span>
       ...
    <span class="br0">}</span>  
 <span class="br0">}</span>
</pre></div>
</div>
<p>Another example is the <code>PropertyChangeSupport</code>. The <code>Component</code> class uses a <code>PropertyChangeSupport</code> object to let interested observers register for notification of changes in the properties of labels, panels, and other GUI components.</p>
<p><a href="http://en.wikibooks.org/wiki/File:Observer-PropertyChangeSupport.gif" class="image"><img alt="Observer-PropertyChangeSupport.gif" src="../../thumbs/371de_Observer-PropertyChangeSupport.gif" width="862" height="265"></a></p>
<p><br>
Can you find the <code>Subject</code>, <code>Observer</code> and <code>update()</code> in the above class diagram?</p>
<ul><li><code>Component</code> is the Subject</li>
<li><code>PropertyChangeListener</code> is the Observer</li>
<li><code>propertyChange()</code> is the equivalent to <code>update()</code></li>
</ul><p>The Java implementation of the Observer pattern has pros and cons:</p>
<p><b>Pros</b></p>
<ul><li>It hides many of the details of the Observer pattern</li>
<li>It can be used both pull and push ways.</li>
</ul><p><b>Cons</b></p>
<ul><li>Because <code>Observable</code> is a class, you have to subclass it; you can&#8217;t add on the <code>Observable</code> behaviour to an existing class that subclasses another superclass (fails the programming to interfaces principle)</li>
<li>Because <code>setChanged()</code> is protected, you can&#8217;t favour composition over inheritance.</li>
<li>If you can&#8217;t subclass <code>Observable</code>, then use delegation, i.e. provide your class with an Observable object and have your class forward key method calls to it.</li>
</ul><h2> <span class="mw-headline" id="State">State</span></h2>
<h2> <span class="mw-headline" id="Strategy">Strategy</span></h2>
<h5> <span class="mw-headline" id="Scope_3">Scope</span></h5>
<p>Object</p>
<h5> <span class="mw-headline" id="Purpose_3">Purpose</span></h5>
<p>Behavioural</p>
<h5> <span class="mw-headline" id="Intent_3">Intent</span></h5>
<p>define a family of algorithms, encapsulate each one, and make them interchangeable to let clients and algorithms vary independently from the clients using it</p>
<h5> <span class="mw-headline" id="Applicability_3">Applicability</span></h5>
<ul><li>when an object should be configurable with one of several algorithms,</li>
<li>and all algorithms can be encapsulated,</li>
<li>and one interface covers all encapsulations</li>
</ul><h5> <span class="mw-headline" id="Structure_3">Structure</span></h5>
<h5> <span class="mw-headline" id="Consequences_3">Consequences</span></h5>
<ul><li>+ greater flexibility, reuse</li>
<li>+ can change algorithms dynamically</li>
<li>- strategy creation &amp; communication overhead</li>
<li>- inflexible Strategy interface</li>
</ul><h5> <span class="mw-headline" id="Implementation_3">Implementation</span></h5>
<ul><li>exchanging information between a Strategy and its context</li>
<li>static strategy selection via templates</li>
</ul><h5> <span class="mw-headline" id="Related_patterns">Related patterns</span></h5>
<ul><li>State[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#State">[3]</a>], can activate several states, whereas a strategy can only activate one of the algorithms.</li>
<li>Flyweight[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#Flyweight">[4]</a>], provides a shared object that can be used in multiple contexts simultaneously, whereas a strategy focuses on one context.</li>
<li>Decorator[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#Decorator">[5]</a>], changes the skin of an object, whereas a strategy changes the guts of an object.</li>
<li>Composite[<a class="external autonumber" href="http://en.wikibooks.org/wiki/Java_Programming/Design_Patterns#Composite">[6]</a>], is used in combination with a strategy to improve efficiency.</li>
</ul><h5> <span class="mw-headline" id="Description_2">Description</span></h5>
<p>Suppose that you work for a company that builds a strategy game. Let assume that you 've come up with the following hierarchy of classes. All characters are able to walk, and there is also a method to render them on screen. The superclass takes care of the implementation of <code>walk()</code> method, while each subclass provides its own implementation of <code>display()</code> since each character looks different.</p>
<p>A new requirement arrives that the characters need to fight, too. Simple job you say; just add a <code>fight()</code> method to <code>Character</code> superclass. But, wait a moment; what about Workers? They cannot fight!</p>
<p><a href="http://en.wikibooks.org/wiki/File:Strategy-fig2.jpg" class="image"><img alt="Strategy-fig2.jpg" src="../../thumbs/4b39c_Strategy-fig2.jpg" width="877" height="457"></a></p>
<p>Well, one could think that you could simply override <code>fight()</code> method in <code>Worker</code> subclass to just do nothing.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">class</span> Worker <span class="br0">{</span> 
      ....
      <span class="kw4">void</span> fight<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
         <span class="co1">// do nothing</span>
      <span class="br0">}</span>
      ....
 <span class="br0">}</span>
</pre></div>
</div>
<p>But what if in the future there is a need for a <code>Guard</code> class that can fight but shouldn&#8217;t walk? We need a cleaner solution. What about taking out the fight and walk behaviours from the superclass to an interface? That way, only the characters that are supposed to walk should implement the Walkable interface and only those characters that are supposed to fight should implement the <code>Fightable</code> interface.</p>
<p><br>
Well, this is another way to say for duplicate code. What if you need to make a small change to the fight behaviour? You would need to modify all the classes. At this point we should put down three design principles to follow in our application development:</p>
<ol><li><i>Identify the aspects of your application that vary and separate them from what stays the same. Take what varies and &#8220;encapsulate&#8221; it so it won&#8217;t affect the rest of your code.</i></li>
<li><i>Program to an interface not to an implementation.</i></li>
<li><i>Favour composition over inheritance.</i></li>
</ol><p>So, let's apply the 1st design principle. Pull out fight and walk behaviour to different classes. And to apply the 2nd design principle as well, we have to pull out these behaviours to interfaces. Hence, we create a new WeaponBehaviour interface to deal with fight behaviour, and similarly a WalkBehaviour interface to deal with walk behaviour.</p>
<p><a href="http://en.wikibooks.org/wiki/File:Strategy-fig4.jpg" class="image"><img alt="Strategy-fig4.jpg" src="../../thumbs/5d529_Strategy-fig4.jpg" width="960" height="281"></a></p>
<p><code>Character</code>s&#8217; behaviours live in separate classes that implement a particular behaviour interface. That way, the <code>Character</code> classes don&#8217;t need to know any of the implementation details for their own behaviours. In addition, we no more rely on an implementation but on an interface. Other types of objects can use these behaviours, too, because they 're not hidden inside our <code>Character</code> class. And we can add new behaviours without modifying any of the existing ones or touching our character classes. So now, all we have to do is have our <code>Character</code> class delegate all behaviour information to the two behaviour interfaces (so here comes the 3rd design principle). We do that by adding two instance variables to <code>Character</code>, <code>weapon</code> and <code>walk</code>.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">public</span> <span class="kw1">abstract</span> <span class="kw1">class</span> <span class="kw3">Character</span> <span class="br0">{</span>
  <span class="kw1">private</span> WeaponBehaviour weapon<span class="sy0">;</span>
  <span class="kw1">private</span> WalkBehaviour walk<span class="sy0">;</span>
  <span class="kw1">public</span> <span class="kw4">void</span> fight<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
     weapon.<span class="me1">useWeapon</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>    <span class="co1">// delegation of fight behaviour</span>
  <span class="br0">}</span>
  <span class="kw1">public</span> <span class="kw4">void</span> setWeapon<span class="br0">(</span>WeaponBehaviour w<span class="br0">)</span><span class="br0">{</span>
    weapon <span class="sy0">=</span> w<span class="sy0">;</span> 
  <span class="br0">}</span>       
  ...
  <span class="kw1">abstract</span> <span class="kw4">void</span> display<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>Each character object will set these variables polymorphically to reference the specific behaviour type it would like at runtime.</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java">
<pre class="de1">
 <span class="kw1">public</span> <span class="kw1">class</span> Knight <span class="kw1">extends</span> <span class="kw3">Character</span> <span class="br0">{</span>
  <span class="kw1">public</span> Knight<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> 
    weapon <span class="sy0">=</span> <span class="kw1">new</span> SwordBehaviour<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
    walk <span class="sy0">=</span> <span class="kw1">new</span> GallopBehaviour<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw1">public</span> <span class="kw4">void</span> display<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        ...
  <span class="br0">}</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>Think of these behaviours as families of algorithms. So, composition gives you a lot of flexibility. Not only does it let you encapsulate a family of algorithms into their own set of classes, but it also lets you change behaviour at runtime as long as the object you are composing with, implements the correct behaviour interface.</p>
<h2> <span class="mw-headline" id="Template_Method">Template Method</span></h2>
<p><br></p>
<h2> <span class="mw-headline" id="Visitor">Visitor</span></h2>





</div>				
								
				
				
												
								
												
				
				
								<div class="visualClear"></div>
				
								
			</div>
			</div></body></html>