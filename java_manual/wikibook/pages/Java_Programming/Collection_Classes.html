<html><head><title>Java Programming/Collection Classes</title><link media="all" href="../../misc/modern.css" type="text/css" rel="stylesheet"></head><body class="mediawiki"><div id="content"><h1 class="firstHeading" id="firstHeading">Java Programming/Collection Classes</h1><div id="bodyContent">
								
				
				
								
				
				
																
				
				
								
				<div lang="en" dir="ltr" class="mw-content-ltr"><table class="wikitable" style="float: right;"><tr><td>Navigate <b><a href="Collections.html" title="Java Programming/Collections">Collection</a></b> topic: 
<ul><li> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Introduction_to_Collections" title="Java Programming/Collection Classes">Introduction</a></li>
<li> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Arrays" title="Java Programming/Collection Classes">Arrays</a></li>
<li> <strong class="selflink">Collection Classes</strong></li>
</ul><dl><dd>
<dl><dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Collection_or_Map" title="Java Programming/Collection Classes">Collection or Map</a>
<dl><dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Collection" title="Java Programming/Collection Classes">Collection</a></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Map" title="Java Programming/Collection Classes">Map</a></dd>
</dl></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Set_or_List_or_Queue" title="Java Programming/Collection Classes">Set or List or Queue</a>
<dl><dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Set" title="Java Programming/Collection Classes">Set</a></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#List" title="Java Programming/Collection Classes">List</a></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Queue" title="Java Programming/Collection Classes">Queue</a></dd>
</dl></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Map_Classes" title="Java Programming/Collection Classes">Map Classes</a></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Thread_Safe_Collections" title="Java Programming/Collection Classes">Thread Safe Collections</a></dd>
<dd> <a href="http://en.wikibooks.org/wiki/Java_Programming/Collection_Classes#Classes_Diagram_.28UML.29" title="Java Programming/Collection Classes">Classes Diagram (UML)</a></dd>
</dl></dd>
</dl><ul><li> <a href="Comparing_Objects.html" title="Java Programming/Comparing Objects">Comparing Objects</a></li>
</ul></td>
</tr></table><p>Collections are a group of objects bound together by a common characteristic. Java has various built-in classes to support the collection of objects, either of the same type or general. The most basic construct to work with is the <i>array</i> of which you will come to know of in a <a href="Arrays.html" title="Java Programming/Arrays">section</a> later in this chapter.</p>
<table id="toc" class="toc"><tr><td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul><li class="toclevel-1 tocsection-1"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Introduction_to_Collections"><span class="tocnumber">1</span> <span class="toctext">Introduction to Collections</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Generics"><span class="tocnumber">2</span> <span class="toctext">Generics</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Collection_or_Map"><span class="tocnumber">3</span> <span class="toctext">Collection or Map</span></a>
<ul><li class="toclevel-2 tocsection-4"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Collection"><span class="tocnumber">3.1</span> <span class="toctext">Collection</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Map"><span class="tocnumber">3.2</span> <span class="toctext">Map</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-6"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Set_or_List_or_Queue"><span class="tocnumber">4</span> <span class="toctext">Set or List or Queue</span></a>
<ul><li class="toclevel-2 tocsection-7"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Set"><span class="tocnumber">4.1</span> <span class="toctext">Set</span></a>
<ul><li class="toclevel-3 tocsection-8"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Detecting_duplicate_objects_in_Sets"><span class="tocnumber">4.1.1</span> <span class="toctext">Detecting duplicate objects in Sets</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#SortedSet"><span class="tocnumber">4.1.2</span> <span class="toctext">SortedSet</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-10"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#List"><span class="tocnumber">4.2</span> <span class="toctext">List</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Queue"><span class="tocnumber">4.3</span> <span class="toctext">Queue</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-12"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Map_Classes"><span class="tocnumber">5</span> <span class="toctext">Map Classes</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Thread_Safe_Collections"><span class="tocnumber">6</span> <span class="toctext">Thread Safe Collections</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#Classes_Diagram_.28UML.29"><span class="tocnumber">7</span> <span class="toctext">Classes Diagram (UML)</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Collection_Classes&amp;printable=yes#External_links"><span class="tocnumber">8</span> <span class="toctext">External links</span></a></li>
</ul></td>
</tr></table><h2> <span class="mw-headline" id="Introduction_to_Collections">Introduction to Collections</span></h2>
<p>The most basic collection interface is called <code>Collection</code>. This interface gives the user a generic usage of a collection.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Collection;   // Interface
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.ArrayList;    // Implementation
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.HashSet;      // Implementation
...
Collection coll1 = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> ArrayList();
Collection coll2 = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> HashSet();
...
&lt; Use coll1 &amp; coll2 &gt;
</pre>
<p>In the above there are two collections. The usage of the collections are the same, the implementations are different. If the existing collection implementations do not meet your needs, you can write your version of the implementation. Your version of the implementation just needs to implement the same <code>java.util.Collection</code> interface, then you can switch to using your implementation and the code that is using the collection does not need to be changed.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Collection;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> com.yourcomp.util.YourCollectionImpl;
...
Collection coll1 = new YourCollectionImpl();
Collection coll2 = new YourCollectionImpl();
...
&lt; Use coll1 &amp; coll2 &gt;
</pre>
<p>The Java JDK collection implementations are quite powerful and good, so it is unlikely that you will need to write your own.</p>
<p>All collections contain object references. Because of that, if the object is changed after it was put in the collection, the object that is 'in' the collection also 'changes'. The object is not really in the collection, only the object reference is. It is not guaranteed that the objects 'inside' the collections won't change. This is an issue only if you put an actively used object in the collection. In that case when you are adding an object that could change any time you need to make a copy or clone of the object. A new object will be created and its reference will be put in the collection. In that case there will be no object references outside of the collection, so the objects 'inside' the collection can only be changed if we take out an object reference from the collection.</p>
<p>Aside from the <code>java.util.Collection</code> interface, the Java JDK has the <code>java.util.Map</code> interface as well. This defines key value mappings. Implementations of the Map interface do not contain collections of objects. Instead they contain collections of key-&gt;value mappings.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Map;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Hashtable;
...
Map map = new Hashtable();
...
map.put( key, value );
</pre>
<p>All collections need to have the same basic operations. Those are:</p>
<ul><li>Adding element(s) to the collection</li>
<li>Removing element(s) from the collection</li>
<li>Obtaining the number of elements in the collection</li>
<li>Listing the contents of the collection, (Iterating through the collection)</li>
</ul><p>Before selecting a particular collection implementation, ask the following question:</p>
<ul><li>Can my collection contain the same elements, i.e. are duplicates allowed?</li>
<li>Can my collection contain the <code><a href="Literals/null.html" title="Java Programming/Literals/null"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">null</font></a></code> element?</li>
<li>Should the collection maintain the order of the elements? Is the order important in any way?</li>
<li>How do you want to access an element? By index, key or just with an iterator?</li>
<li>Does the collection need to be synchronized?</li>
<li>From a performance perspective, which one needs to be faster, updates or reads?</li>
<li>From a usage perspective, which operation will be more frequent, updates or reads?</li>
</ul><p>Once you know your needs, you can select an exsisting implementation. But first decide if you need a 'Collection', or a 'Map'.</p>
<h2> <span class="mw-headline" id="Generics">Generics</span></h2>
<p>Since JDK version 1.5 an enhancement to the type system of the Java language has been added. It is called <i>Generics</i>. Most often <i>Generics</i> will be used with the collection classes.</p>
<dl><dt>parameterized type &lt;E&gt;&#160;</dt>
</dl><p>All collection implementations since 1.5 now have one 'parameterized type &lt;E&gt;' added. The 'E' refers to an <i>Element</i> type. When a collection is created the actual 'Element type' will replace the E.</p>
<p>Objects put into a collection are upcasted to <code><a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object">Object</a></code> class. It means that you need to cast the object reference back when you get an element out from the collection. It also means that <b>you need to know</b> the type of the object when you taking it out. For this reason we usually add objects of the same type to a collection. If a collection contains different types of objects, we will have difficulty finding out the type of the objects obtained from a collection at run time.</p>
<p>With the use of the 'parameterized type &lt;E&gt;', the 'Element-type' that can be put into the collection can be specified when the collection object is created.</p>
<pre>
Collection&lt;Integer&gt; ageList = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> ArrayList&lt;Integer&gt;();
ageList.add( <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> Integer(46) );     // --- Integer can be added
ageList.add( "50" );  // --- Compilation error, ageList can have only Integers inside
</pre>
<p><code>ageList</code> is a collection that can contain only Integer objects as elements. No casting is required when we take out an element.</p>
<pre>
Integer age = ageList.get(0);
</pre>
<p>For more information about Generics, please go to <a href="Generics.html" title="Java Programming/Generics">Java Programming/Generics</a>.</p>
<h2> <span class="mw-headline" id="Collection_or_Map">Collection or Map</span></h2>
<p>The Java JDK contains two high level Interfaces:</p>
<ul><li>java.util.Collection</li>
<li>java.util.Map</li>
</ul><p>Implementations for those interfaces are not interchangeable. Collections are used for collecting Java objects. Maps are used for mapping key/value pairs.</p>
<h3> <span class="mw-headline" id="Collection">Collection</span></h3>
<p>Use the Collection interface if you need to keep related (usually the same type of) objects together in a collection where you can:</p>
<ul><li>Search for a particular element</li>
<li>List the elements</li>
<li>Maintain and/or change the order of the elements by using the collection basic operations (Add, Remove, Update,..)</li>
<li>Access the elements by an index number</li>
</ul><p>The advantages of using the <code>Collection</code> interface are:</p>
<ul><li>Gives a generic usage, as we talked about above, it is easy to switch implementation</li>
<li>It makes it easy to convert one type of collection to an other.</li>
</ul><p>The <code>Collection</code> interface defines the following basic operations:</p>
<ul><li><code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> add( E o );</li>
<li><code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> addAll( Collection c );</li>
<li><code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> remove( <code><a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object">Object</a></code> o );</li>
<li><code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> removeAll( Collection c );</li>
<li><code><a href="Keywords/boolean.html" title="Java Programming/Keywords/boolean"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">boolean</font></a></code> retainAll( Collection c );</li>
</ul><p>The methods above return <code><a href="Literals/Boolean_Literals/true.html" title="Java Programming/Literals/Boolean Literals/true"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">true</font></a></code> if the collection has changed due to the operation. Note that in addAll() we can add any type of collection. This is the beauty of using the Collection interface. You can have a LinkedList and just call the <code>addAll(list)</code> method, passing in a list. You can pass in a <code>Vector</code>, an <code>ArrayList</code>, a <code>HashSet</code>, a <code>TreeSet</code>, a <code>YourImpOfCollection</code>, ... All those different type of collections will be <b>magically</b> converted to a <code>LinkList</code>.</p>
<p>Lets have a closer look at this <i>magic</i>. The conversion is easy because the <code>Collection</code> interface defines a standard way of looping through the elements. The following code is a possible implementation of <code>addAll()</code> method of the LinkList.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Collection
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Iterator
...
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="API/java.lang.String.html" title="Java Programming/API/java.lang.String">String</a></code> addAll( Collection coll )
{
   int sizeBefore = _linkList.size();
   <b>Iterator iter = coll.iterator();</b>
   while( iter.hasNext() )
   {
      <b>_linkList.add( iter.next() );</b>
   }
   if ( sizeBefore &gt; _linkList.size() )
   {
      <code><a href="Keywords/return.html" title="Java Programming/Keywords/return"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">return</font></a></code> <code><a href="Literals/Boolean_Literals/true.html" title="Java Programming/Literals/Boolean Literals/true"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">true</font></a></code>;
   }
   else
   {
      <code><a href="Keywords/return.html" title="Java Programming/Keywords/return"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">return</font></a></code> <code><a href="Literals/Boolean_Literals/false.html" title="Java Programming/Literals/Boolean Literals/false"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">false</font></a></code>;
   }    
}
</pre>
<p>The above code just iterates through the passed in collection and adds the elements to the link list. You do not have to do that, since that is already defined. What you might need to code for is to loop through a 'Customer' collection:</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Collection
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.util.Iterator
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.yourcompany.Customer
...
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="API/java.lang.String.html" title="Java Programming/API/java.lang.String">String</a></code> printCustomerNames( Collection customerColl )
{
   StringBuffer buf = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> StringBuffer();

   <b>Iterator iter = customerColl.iterator();</b>
   while( iter.hasNext() )
   {
      <b>Customer cust = (Customer) iter.next();</b>
      buf.append( cust.getName() );
      buf.append( "\n" );
   }
  <code><a href="Keywords/return.html" title="Java Programming/Keywords/return"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">return</font></a></code> buf.toString();
}
</pre>
<p>Notice two things:</p>
<ul><li>The above code will work for all type of collections.</li>
<li>We have to know the type of objects inside the collection, because we call a method on it.</li>
</ul><h3> <span class="mw-headline" id="Map">Map</span></h3>
<div class="thumb tright">
<div class="thumbinner" style="width:132px;"><a href="http://en.wikibooks.org/wiki/File:Java_map_interfaces.svg" class="image"><img alt="" src="../../thumbs/5ca8e_130px-Java_map_interfaces.svg.png" width="130" height="77" class="thumbimage"></a>
<div class="thumbcaption">
<div class="magnify"><a href="http://en.wikibooks.org/wiki/File:Java_map_interfaces.svg" class="internal" title="Enlarge"><img src="../../thumbs/6d83a_magnify-clip.png" width="15" height="11" alt=""></a></div>
Figure 1:Map Interfaces</div>
</div>
</div>
<p>A map, sometimes also called an <i>Associated Array</i> or a <i>Dictionary</i>, can be thought of as an array where the index need not be an integer.</p>
<p>Use the Map interface if you need to keep related objects together in a Map where you can:</p>
<ul><li>Access an element by a key object</li>
<li>Map one object to other</li>
</ul><dl><dt>java.util.Map&lt;K,V&gt;&#160;</dt>
<dd>maps keys to values. A map cannot contain duplicate keys; each key can map to at most one value. The Map interface provides three collection views, which allow a map's contents to be viewed as a set of keys, collection of values, or set of key-value mappings. The key is usually a non-mutable object. The value object however can be a mutable object.</dd>
<dt>java.util.SortedMap&lt;K,V&gt;&#160;</dt>
<dd>same as the Map interface, plus the keys in the Map are sorted.</dd>
</dl><h2> <span class="mw-headline" id="Set_or_List_or_Queue">Set or List or Queue</span></h2>
<div class="thumb tright">
<div class="thumbinner" style="width:402px;"><a href="http://en.wikibooks.org/wiki/File:Java_collection_interfaces.svg" class="image"><img alt="" src="../../thumbs/e76a5_400px-Java_collection_interfaces.svg.png" width="400" height="126" class="thumbimage"></a>
<div class="thumbcaption">
<div class="magnify"><a href="http://en.wikibooks.org/wiki/File:Java_collection_interfaces.svg" class="internal" title="Enlarge"><img src="../../thumbs/6d83a_magnify-clip.png" width="15" height="11" alt=""></a></div>
Figure 2:</div>
</div>
</div>
<p>There is no direct implementation for the <code>java.util.Collection</code> interface. The Collection interface has five sub interfaces. Those are:</p>
<dl><dt>java.util.Set&lt;E&gt;&#160;</dt>
<dd>contains unique elements, so duplicates not allowed. It is similar to a mathematical Set.</dd>
<dt>java.util.List&lt;E&gt;&#160;</dt>
<dd>elements are put in the list in a certain order, and can be accessed by an index. Duplicates are allowed, the same element can be added to a list.</dd>
<dt>java.util.SortedSet&lt;E&gt;&#160;</dt>
<dd>same as the Set interface; plus the elements in the SortedSet are sorted</dd>
<dt>java.util.Queue&lt;E&gt;&#160;</dt>
<dd>queues provide additional insertion, extraction, and inspection operations. There are FIFO (first in, first out) and LIFO (last in, first out) queues.</dd>
<dt>java.util.BlockingQueue&lt;E&gt;&#160;</dt>
<dd>waits for the queue to become non-empty when retrieving an element, and waits for space to become available in the queue when storing an element. Best used for producer-consumer queues.</dd>
</dl><h3> <span class="mw-headline" id="Set">Set</span></h3>
<p>The basic implementation of the <code>Set</code> interface is the <code>HashSet</code>.</p>
<div class="thumb tright">
<div class="thumbinner" style="width:652px;"><a href="http://en.wikibooks.org/wiki/File:Java_collection_set_implementations.jpg" class="image"><img alt="Java collection set implementations.jpg" src="../../thumbs/a1b7b_650px-Java_collection_set_implementations.jpg" width="650" height="314" class="thumbimage"></a>
<div class="thumbcaption">
<div class="magnify"><a href="http://en.wikibooks.org/wiki/File:Java_collection_set_implementations.jpg" class="internal" title="Enlarge"><img src="../../thumbs/6d83a_magnify-clip.png" width="15" height="11" alt=""></a></div>
</div>
</div>
</div>
<dl><dt>java.util.TreeSet&lt;E&gt;</dt>
<dd>Elements are sorted, not synchronized. <code><a href="Literals/null.html" title="Java Programming/Literals/null"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">null</font></a></code> not allowed</dd>
<dt>java.util.HashSet&lt;E&gt;&#160;</dt>
<dd>Not synchronized. Allows the <code><a href="Literals/null.html" title="Java Programming/Literals/null"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">null</font></a></code> elements</dd>
<dt>java.util.CopyOnWriteArraySet&lt;E&gt;&#160;</dt>
<dd>Thread safe, a fresh copy is created during modification operation. Add, update, delete are expensive.</dd>
<dt>java.util.EnumSet&lt;E extends Enum&lt;E&gt;&gt;&#160;</dt>
<dd>All of the elements in an enum set must come from a single enum type that is specified, explicitly or implicitly, when the set is created. Enum sets are represented internally as bit vectors.</dd>
<dt>java.util.LinkedHashSet&lt;E&gt;&#160;</dt>
<dd>Same as HashSet, plus defines the iteration ordering, which is the order in which elements were inserted into the set.</dd>
</dl><h4> <span class="mw-headline" id="Detecting_duplicate_objects_in_Sets">Detecting duplicate objects in Sets</span></h4>
<p><code>Set</code> cannot have duplicates in it. You may wonder how duplicates are detected when we are adding an object to the <code>Set</code>. We have to see if that object exists in the Set or not. It is not enough to check the object references, the objects' values have to be checked as well.</p>
<p>To do that, fortunately, each java object has the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>boolean equal(Object obj);</code></a>, method available inherited from <code><a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object">Object</a></code>. You need to override it. That method will be called by the Set implementation to compare the two objects to see if they are equal or not.</p>
<p>There is a problem, though. What if I put two different type of objects to the Set. I put an Apple and an Orange. They can not be compared. Calling the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>equal()</code></a> method would cause a <code>ClassCastException</code>. There are two solutions to this:</p>
<ul><li><b>Solution one</b>&#160;: Override the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>int hashCode()</code></a> method and return the same values for the same type of objects and return different values for different type of objects. The <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>equal()</code></a> method is used to compare objects only with the same value of hashCode. So before an object is added, the Set implementation needs to:
<ul><li>find all the objects in the Set that has the same hashCode as the candidate object hashCode</li>
<li>and for those, call the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>equal()</code></a> methods passing in the candidate object</li>
<li>if any of them returns true, the object is not added to the Set.</li>
</ul></li>
</ul><ul><li><b>Solution two</b>&#160;: Create a super class for the Apple and Orange, let's call it Fruit class. Put Fruits in the Set. You need to do the following:
<ul><li>Do not override the <code>equals()</code> and <code>hashCode()</code> methods in the Apple and Orange classes</li>
<li>Create <code>appleEquals()</code> method in the Apple class, and create <code>orangeEquals()</code> method in the Orange class</li>
<li>Override the <code>hashCode()</code> method in the Fruit class and return the same value, so the <code>equals()</code> is called by the Set implementation</li>
<li>Override the <code>equals()</code> method in the Fruit class for something like this.</li>
</ul></li>
</ul><table style="padding:2px; margin:2px; width:100%;"><tr valign="top"><td style="width:32px;"><img alt="Computer code" src="../../thumbs/0a23a_32px-Nuvola_apps_display.png" width="32" height="32"></td>
<td style="background-color:#f0f0ff; border-left: 4px solid blue; padding-left: 6px; font-family: Monaco, Consolas, 'Courier New', Courier; font-size:1.0em; line-height:1.5 !important;">
<div dir="ltr" class="mw-geshi" style="text-align: left;">
<div class="java source-java"><span class="kw1">public</span> <span class="kw4">boolean</span> equals<span class="br0">(</span> <span class="kw3">Object</span> obj <span class="br0">)</span><br><span class="br0">{</span><br>
&#160; &#160; <span class="kw4">boolean</span> ret <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span><br>
&#160; &#160; <span class="kw1">if</span> <span class="br0">(</span> <span class="kw1">this</span> <span class="kw1">instanceof</span> Apple <span class="sy0">&amp;&amp;</span><br>
&#160; &#160; &#160; &#160; &#160; obj <span class="kw1">instanceof</span> Apple <span class="br0">)</span><br>
&#160; &#160; <span class="br0">{</span><br>
&#160; &#160; &#160; &#160; ret <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">appleEquals</span><span class="br0">(</span>obj<span class="br0">)</span><span class="sy0">;</span><br>
&#160; &#160; <span class="br0">}</span><br>
&#160; &#160; <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span> <span class="kw1">this</span> <span class="kw1">instanceof</span> Orange <span class="sy0">&amp;&amp;</span><br>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; obj &#160;<span class="kw1">instanceof</span> Orange <span class="br0">)</span><br>
&#160; &#160; <span class="br0">{</span><br>
&#160; &#160; &#160; &#160; ret <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">orangeEquals</span><span class="br0">(</span>obj<span class="br0">)</span><span class="sy0">;</span> &#160;<br>
&#160; &#160; <span class="br0">}</span><br>
&#160; &#160; <span class="kw1">else</span><br>
&#160; &#160; <span class="br0">{</span><br>
&#160; &#160; &#160; &#160; <span class="co1">// --- Can not compare Orange to Apple ---</span><br>
&#160; &#160; &#160; &#160;ret <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span><br>
&#160; &#160; <span class="br0">}</span><br>
&#160; &#160; <span class="kw1">return</span> ret<span class="sy0">;</span><br><span class="br0">}</span></div>
</div>
</td>
</tr></table><p><b>Note:</b></p>
<ul><li>only the objects that have the same hashCode will be compared.</li>
<li>you are responsible to override the <code>equal()</code> and <code>hashCode()</code> methods. The default implementations in Object won't work.</li>
<li>Only override the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>hashCode()</code></a> method if you want to eliminate value duplicates.</li>
<li>Do not override the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>hashCode()</code></a> method if you know that the values of your objects are different, or if you only want to prevent adding the exactly same object.</li>
<li>Beware that the <a href="API/java.lang.Object.html" title="Java Programming/API/java.lang.Object"><code>hashCode()</code></a> may be used in other collection implementaions, like in a Hashtable to find an object fast. Overriding the default <code>hashCode()</code> method may affect performance there.</li>
<li>the default hashCodes are unique for each object created, so if you decide not to override the <code>hashCode()</code> method, there is no point overriding the <code>equal()</code> method, as it won't be called.</li>
</ul><h4> <span class="mw-headline" id="SortedSet">SortedSet</span></h4>
<p>The SortedSet interface extends the Set Interface. All elements in the SortedSet must implement the Comparable Interface, futher more all elements must be mutually comparable.</p>
<p>Note that the ordering maintained by a sorted set must be consistent with equals if the sorted set is to correctly implement the Set interface. This is so because the Set interface is defined in terms of the equals operation, but a sorted set performs all element comparisons using its compareTo (or compare) method, so two elements that are deemed equal by this method are, from the standpoint of the sorted set, equal.</p>
<p>The SortedSet interface has additional methods due to the sorted nature of the 'Set'. Those are:</p>
<ul><li><code>E first();</code> -- returns the first element</li>
<li><code>E last();</code> -- returns the last element</li>
<li><code>SortedSet headSet(E toElement);</code> -- returns from the first, to the exclusive toElement</li>
<li><code>SortedSet tailSet(E fromElement);</code> -- returns from the inclusive fromElement to the end</li>
<li><code>SortedSet subSet(E fromElement, E toElement);</code> -- returns elements range from fromElement, inclusive, to toElement, exclusive. (If fromElement and toElement are equal, the returned sorted set is empty.)</li>
</ul><h3> <span class="mw-headline" id="List">List</span></h3>
<p>The List has the following implemenations:</p>
<div class="thumb tright">
<div class="thumbinner" style="width:452px;"><a href="http://en.wikibooks.org/wiki/File:Java_collection_list_implementations.jpg" class="image"><img alt="Java collection list implementations.jpg" src="../../thumbs/ecc44_450px-Java_collection_list_implementations.jpg" width="450" height="329" class="thumbimage"></a>
<div class="thumbcaption">
<div class="magnify"><a href="http://en.wikibooks.org/wiki/File:Java_collection_list_implementations.jpg" class="internal" title="Enlarge"><img src="../../thumbs/6d83a_magnify-clip.png" width="15" height="11" alt=""></a></div>
</div>
</div>
</div>
<dl><dt>java.util.Vector&lt;E&gt;&#160;</dt>
<dd>Syncronized, use in multiple thread access, otherwise use ArrayList</dd>
<dt>java.util.Stack&lt;E&gt;&#160;</dt>
<dd>It extends class Vector with five operations that allow a vector to be treated as a stack. It represents a last-in-first-out (LIFO) stack of objects.</dd>
<dt>java.util.ArrayList&lt;E&gt;&#160;</dt>
<dd>Non-syncronized, use in single thread environment, otherwise use Vector</dd>
<dt>java.util.LinkedList&lt;E&gt;&#160;</dt>
<dd>Non-syncronized, update operation is faster than other lists, easy to use for stacks, queues, double-ended queues.</dd>
<dt>javax.management.AtributeList&lt;E&gt;&#160;</dt>
<dd>Represents a list of values for attributes of an MBean. The methods used for the insertion of Attribute objects in the AttributeList overrides the corresponding methods in the superclass ArrayList. This is needed in order to insure that the objects contained in the AttributeList are only Attribute objects.</dd>
<dt>javax.management.relation.RoleList&lt;E&gt;&#160;</dt>
<dd>A RoleList represents a list of roles (Role objects). It is used as parameter when creating a relation, and when trying to set several roles in a relation (via 'setRoles()' method). It is returned as part of a RoleResult, to provide roles successfully retrieved.</dd>
<dt>javax.management.relation.RoleUnresolvedList&lt;E&gt;&#160;</dt>
<dd>A RoleUnresolvedList represents a list of RoleUnresolved objects, representing roles not retrieved from a relation due to a problem encountered when trying to access (read or write to roles).</dd>
</dl><p><br>
The basic implemenation of the <code>List</code> interface is the <code>ArrayList</code>. The ArrayList is not syncronized, not thread safe. <code>Vector</code> is syncronized, and thread safe. <code>Vector</code> is slower, because of the extra overhead to make it thread safe. When only one thread is accessing the list, use the ArrayList. Whenever you insert or remove an element from the list, there are extra overhead to reindex the list. When you have a large list, and you have lots of insert and remove, consider using the <code>LinkedList</code>.</p>
<p>The name <code>LinkList</code> implies a special data structure where the elements/nodes are connected by pointers. To remove an element from the link list the pointers need to be rearranged.</p>
<pre>
 Head               Node 1                   Node 2                     Node n
  ______
 | Size |          _________________        _______________            _____________
 |______|         |      | point   |       |      | point  |          |      |      |  
 | First|--------&gt;| Data | to next |------&gt;| Data | to next|-- ... --&gt;| Data | null |
 | elem |         |______|_________|       |______|________|          |______|______|
 |______|                                                                 |
 | Last |----------------------------------------------------------------- 
 |_elem_|
  
</pre>
<p>After removing Node 2:</p>
<pre>
 Head               Node 1                   Node 2                     Node n
  ______                                 ___________________...________
 | Size |          _________________    |   _______________           _|____________
 |_- 1__|         |      | point   |    |  |      | point  |          |      |      |  
 | First|--------&gt;| Data | to next |----   | Data | to next|          | Data | null |
 | elem |         |______|_________|       |______|________|          |______|______|
 |______|                                                                 |
 | Last |----------------------------------------------------------------- 
 |_elem_|
</pre>
<h3> <span class="mw-headline" id="Queue">Queue</span></h3>
<p>The Queue interface adds the following operations to the Collection interface:</p>
<table class="wikitable"><tr><td><b>E element()</b></td>
<td>Retrieves, but does not remove, the head of this queue. This method differs from the peek method only in that it throws an exception if this queue is empty</td>
</tr><tr><td><b>boolean offer(E o)</b></td>
<td>Inserts the specified element into this queue, if possible.</td>
</tr><tr><td><b>E peek()</b></td>
<td>Retrieves, but does not remove, the head of this queue, returning null if this queue is empty</td>
</tr><tr><td><b>E poll()</b></td>
<td>Retrieves and removes the head of this queue, or null if this queue is empty</td>
</tr><tr><td><b>E remove()</b></td>
<td>Retrieves and removes the head of this queue. This method differs from the poll method in that it throws an exception if this queue is empty.</td>
</tr></table><p><br></p>
<table class="wikitable"><tr><td>
<dl><dt>java.util.PriorityQueue&lt;E&gt;&#160;</dt>
<dd>orders elements according to an order/priority specified at construction time, null element is not allowed.</dd>
<dt>java.util.concurrent.ArrayBlockingQueue&lt;E&gt;&#160;</dt>
<dd>orders elements FIFO; syncronized, thread safe.</dd>
<dt>java.util.concurrent.SyncronousQueue&lt;E&gt;&#160;</dt>
<dd>each put must wait for a take, and vice versa, does not have any internal capacity, not even a capacity of one, an element is only present when you try to take it; you cannot add an element (using any method) unless another thread is trying to remove it</dd>
</dl></td>
<td>
<div class="center">
<div class="floatnone"><a href="http://en.wikibooks.org/wiki/File:Java_collection_queue_implementations.jpg" class="image"><img alt="Java collection queue implementations.jpg" src="../../thumbs/4e612_450px-Java_collection_queue_implementations.jpg" width="450" height="269"></a></div>
</div>
</td>
</tr></table><h2> <span class="mw-headline" id="Map_Classes">Map Classes</span></h2>
<p>The Map interface has the following implementations:</p>
<div class="thumb tright">
<div class="thumbinner" style="width:652px;"><a href="http://en.wikibooks.org/wiki/File:Java_map_implementation.jpg" class="image"><img alt="Java map implementation.jpg" src="../../thumbs/03cf6_650px-Java_map_implementation.jpg" width="650" height="324" class="thumbimage"></a>
<div class="thumbcaption">
<div class="magnify"><a href="http://en.wikibooks.org/wiki/File:Java_map_implementation.jpg" class="internal" title="Enlarge"><img src="../../thumbs/6d83a_magnify-clip.png" width="15" height="11" alt=""></a></div>
</div>
</div>
</div>
<dl><dt>java.util.TreeMap&lt;E&gt;</dt>
<dd>guarantees that the map will be in ascending key order, sorted according to the natural order for the key's class, not-syncronized.</dd>
<dt>java.util.HashMap&lt;E&gt;&#160;</dt>
<dd>is roughly equivalent to Hashtable, except that it is unsynchronized and permits nulls</dd>
<dt>java.util.concurrent.ConcurrentHashMap&#160;</dt>
<dd>same Hashtable, plus retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove).</dd>
<dt>java.util.Hashtable&lt;E&gt;&#160;</dt>
<dd>Syncronized, null can not be used as key</dd>
<dt>java.util.WeakHashMap&lt;E&gt;&#160;</dt>
<dd>entry in a WeakHashMap will automatically be removed when its key is no longer in ordinary use. Nonsyncronized.</dd>
<dt>java.util.LinkedHashMap&lt;E&gt;&#160;</dt>
<dd>This linked list defines the iteration ordering, which is normally the order in which keys were inserted into the map (insertion-order). Note that insertion order is not affected if a key is re-inserted into the map.</dd>
<dt>java.util.IdentityHashMap&#160;</dt>
<dd>This class implements the Map interface with a hash table, using reference-equality in place of object-equality when comparing keys (and values). In other words, in an IdentityHashMap, two keys k1 and k2 are considered equal if and only if (k1==k2). (In normal Map implementations (like HashMap) two keys k1 and k2 are considered equal if and only if (k1==null&#160;? k2==null&#160;: k1.equals(k2)).) Not-syncronized.</dd>
<dt>java.util.EnumMap&#160;</dt>
<dd>All of the keys in an enum map must come from a single enum type that is specified, explicitly or implicitly, when the map is created. Enum maps are represented internally as arrays. This representation is extremely compact and efficient. Not-syncronized.</dd>
</dl><h2> <span class="mw-headline" id="Thread_Safe_Collections">Thread Safe Collections</span></h2>
<p>It is also called Concurrent Collections. Most of the popular collection classes have implementations for both single thread and multiple thread environments. The non-synchronized implementations are always faster. You can use the non-synchronized implementations in multiple thread environments, when you make sure that only one thread updating the collection at any given time.</p>
<p>A new Java JDK package was introduced at Java 1.5, that is <code>java.util.concurrent</code>. This package supplies a few Collection implementations designed for use in multithreaded environments.</p>
<p>The following table list all the syncronized collection classes:</p>
<table class="wikitable"><tr><td></td>
<th>syncronized</th>
<th>non-syncronized</th>
</tr><tr><td rowspan="4">List</td>
<td>java.util.Vector</td>
<td>java.util.ArrayList</td>
</tr><tr><td>java.util.Stack</td>
<td></td>
</tr><tr><td></td>
<td>java.util.LinkList</td>
</tr><tr><td>java.util.concurrent.CopyOnWriteArrayList</td>
<td></td>
</tr><tr><td rowspan="4">Set</td>
<td></td>
<td>java.util.TreeSet</td>
</tr><tr><td></td>
<td>java.util.HashSet</td>
</tr><tr><td></td>
<td>java.util.LinkHashSet</td>
</tr><tr><td>java.util.concurrent.CopyOnWriteArraySet</td>
<td></td>
</tr><tr><td rowspan="5">Map</td>
<td></td>
<td>java.util.TreeMap</td>
</tr><tr><td>java.util.Hashtable
<p>java.util.concurrent.ConcurrentHashMap</p>
</td>
<td>java.util.HashMap</td>
</tr><tr><td></td>
<td>java.util.LinkedHashMap</td>
</tr><tr><td></td>
<td>java.util.IdentityHashMap</td>
</tr><tr><td></td>
<td>java.util.EnumMap</td>
</tr></table><h2> <span class="mw-headline" id="Classes_Diagram_.28UML.29">Classes Diagram (UML)</span></h2>
<p>The following UML class diagram shows the <b>Collection</b> interfaces and their implementations.</p>
<div class="center">
<div class="floatnone"><a href="http://en.wikibooks.org/wiki/File:Java_collection_implementation.jpg" class="image"><img alt="Java collection implementation.jpg" src="../../thumbs/49df8_700px-Java_collection_implementation.jpg" width="700" height="476"></a></div>
</div>
<p><br></p>
<hr><p>The following UML class diagram shows the <b>Map</b> interfaces and their implementations.</p>
<div class="center">
<div class="floatnone"><a href="http://en.wikibooks.org/wiki/File:Java_map_implementation.jpg" class="image"><img alt="Java map implementation.jpg" src="../../thumbs/c4fc0_Java_map_implementation.jpg" width="700" height="349"></a></div>
</div>
<p><br></p>
<h2> <span class="mw-headline" id="External_links">External links</span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://java.sun.com/docs/books/tutorial/collections/interfaces/collection.html">Java Tutorial on Collections</a></li>
</ul></div>				
								
				
				
												
								
												
				
				
								<div class="visualClear"></div>
				
								
			</div>
			</div></body></html>