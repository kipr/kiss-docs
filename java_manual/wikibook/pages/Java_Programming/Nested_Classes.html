<html><head><title>Java Programming/Nested Classes</title><link media="all" href="../../misc/modern.css" type="text/css" rel="stylesheet"></head><body class="mediawiki"><div id="content"><h1 class="firstHeading" id="firstHeading">Java Programming/Nested Classes</h1><div id="bodyContent">
								
				
				
								
				
				
																
				
				
								
				<div lang="en" dir="ltr" class="mw-content-ltr"><table class="wikitable" style="float: right;"><tr><td>Navigate <b><a href="Language_Fundamentals.html" title="Java Programming/Language Fundamentals">Language Fundamentals</a></b> topic: 
<ul><li> <a href="Variables.html" title="Java Programming/Variables">Variables</a></li>
<li> <a href="Flow_control.html" title="Java Programming/Flow control">Flow control</a></li>
<li> <a href="Arrays.html" title="Java Programming/Arrays">Arrays</a></li>
<li> <a href="Methods.html" title="Java Programming/Methods">Methods</a></li>
<li> <a href="Statements.html" title="Java Programming/Statements">Statements</a></li>
<li> <a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Identifiers,_literals_and_expressions&amp;action=edit&amp;redlink=1" class="new" title="Java Programming/Identifiers, literals and expressions (does not exist)">Identifiers, literals and expressions</a></li>
<li> <a href="Types.html" title="Java Programming/Types">Types</a></li>
<li> <a href="API/java.lang.String.html" title="Java Programming/API/java.lang.String">String</a></li>
<li> <a href="Classes,_Objects_and_Types.html" title="Java Programming/Classes, Objects and Types">Classes, Objects and Types</a></li>
<li> <a href="Syntax.html" title="Java Programming/Syntax">Syntax</a></li>
<li> <a href="Keywords/assert.html" title="Java Programming/Keywords/assert">Assertions</a></li>
<li> <a href="Keywords.html" title="Java Programming/Keywords">Keywords</a></li>
<li> <a href="Packages.html" title="Java Programming/Packages">Packages</a></li>
<li> <strong class="selflink">Nested classes</strong></li>
<li> <a href="Access_Modifiers.html" title="Java Programming/Access Modifiers">Access modifiers</a></li>
<li> <a href="Data_and_Variables.html" title="Java Programming/Data and Variables">Data and variables</a></li>
<li> <a href="Generics.html" title="Java Programming/Generics">Generics</a></li>
<li> <a href="Java_Security.html" title="Java Programming/Java Security">Java Security</a></li>
</ul></td>
</tr></table><p>In Java you can define a class inside an other class.</p>
<p>A class can be nested:</p>
<ul><li>inside another class,</li>
<li>or inside a method</li>
</ul><table id="toc" class="toc"><tr><td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul><li class="toclevel-1 tocsection-1"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Nested_Classes&amp;printable=yes#Nest_a_class_inside_a_class"><span class="tocnumber">1</span> <span class="toctext">Nest a class inside a class</span></a>
<ul><li class="toclevel-2 tocsection-2"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Nested_Classes&amp;printable=yes#Static_inner_class"><span class="tocnumber">1.1</span> <span class="toctext">Static inner class</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-3"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Nested_Classes&amp;printable=yes#Nest_a_class_inside_a_method"><span class="tocnumber">2</span> <span class="toctext">Nest a class inside a method</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="http://en.wikibooks.org/w/index.php?title=Java_Programming/Nested_Classes&amp;printable=yes#Anonymous_Classes"><span class="tocnumber">3</span> <span class="toctext">Anonymous Classes</span></a></li>
</ul></td>
</tr></table><h2> <span class="mw-headline" id="Nest_a_class_inside_a_class">Nest a class inside a class</span></h2>
<p>When a class is declared inside another class, the nested class' access modifier can be <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code>, <code><a href="Keywords/private.html" title="Java Programming/Keywords/private"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">private</font></a></code>,<code><a href="Keywords/protected.html" title="Java Programming/Keywords/protected"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">protected</font></a></code> or <code>package(default)</code>.</p>
<pre>
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> OuterClass
{
   <code><a href="Keywords/private.html" title="Java Programming/Keywords/private"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">private</font></a></code> <code><a href="API/java.lang.String.html" title="Java Programming/API/java.lang.String">String</a></code> <b>outerInstanceVar</b>;

   <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> InnerClass
   {
      <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> printVars()
      {
         System.out.println( "Print Outer Class Instance Var.:" + <b>outerInstanceVar</b>);
      }
   } 
}
</pre>
<p>The inner class has access to the enclosing class instance's variables and methods, even private ones, as seen above. This makes it very different from the nested class in C++, which are equivalent to the "static" inner classes, see below.</p>
<p>An inner object has a reference to the outer object. The nested object can only be created with a reference to the 'outer' object. See below.</p>
<pre>
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> testInner()
{
    ...
    OuterClass outer = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> OuterClass();
    OuterClass.InnerClass inner = outer.<code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> InnerClass();        
    ...
}
</pre>
<p>(When in a non-static method of the outer class, you can directly use <code>new InnerClass()</code>, since the class instance is implied to be <code>this</code>.)</p>
<p>You can directly access the reference to the outer object from within an inner class with the syntax <code>OuterClass.this</code>; although this is usually unnecessary because you already have access to its fields and methods.</p>
<p>Inner classes compile to separate ".class" bytecode files, usually with the name of the enclosing class, followed by a "$", followed by the name of the inner class. So for example, the above inner class would typically be compiled to a file named "OuterClass$InnerClass.class".</p>
<h3> <span class="mw-headline" id="Static_inner_class">Static inner class</span></h3>
<p>An inner class can be declared <i>static</i>. A static inner class has no enclosing instance, and therefore cannot access instance variables and methods of the outer class. You do not specify an instance when creating a static inner class. This is equivalent to the inner classes in C++.</p>
<h2> <span class="mw-headline" id="Nest_a_class_inside_a_method">Nest a class inside a method</span></h2>
<p>These inner classes, also called <i>local classes</i>, cannot have access modifiers, like local variables, since the class is 'private' to the method. The inner class can be only <code><a href="Keywords/abstract.html" title="Java Programming/Keywords/abstract"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">abstract</font></a></code> or <code><a href="Keywords/final.html" title="Java Programming/Keywords/final"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">final</font></a></code>.</p>
<pre>
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> OuterClass
{
   <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> method()
   {
      <code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> InnerClass
      {
 
      } 
   }
}
</pre>
<p>In addition to instance variables of the enclosing class, local classes can also access local variables of the enclosing method, but only ones that are declared <code>final</code>. This is because the local class instance might outlive the invocation of the method, and so needs its own copy of the variable. To avoid problems with having two different copies of a mutable variable with the same name in the same scope, it is required to be <i>final</i>, so it cannot be changed.</p>
<h2> <span class="mw-headline" id="Anonymous_Classes">Anonymous Classes</span></h2>
<p>In Java a class definition and its instantiation can be combined into a single step. By doing that the class does not require a name. Those classes are called anonymous classes. An anonymous class can be defined and instantiated in contexts where a reference can be used, and it is a nested class to an existing class. Anonymous class is a special case of the local class to a method, above; and hence they also can use final local variables of the enclosing method.</p>
<p>Anonymous classes are most useful to subclass and upcast to an 'Adapter Class' or to an interface.</p>
<pre>
<code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/interface.html" title="Java Programming/Keywords/interface"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">interface</font></a></code> ActionListener
{
    <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> click();
}
...
ActionListener clk = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> ActionListener() 
    {
        <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> click()
        {
            // --- implementation of the click event ---
            ...
            <code><a href="Keywords/return.html" title="Java Programming/Keywords/return"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">return</font></a></code>;
        }
    };
</pre>
<p>In the above example the class that implements the <code>ActionListener</code> is <b>anonymous</b>. The class is defined where it is instantiated.</p>
<p>The above code is harder to read than if the class explicitly defined, so why use it? If many implementations are needed for an interface and those classes are used only in one particular place, using <b>anonymous</b> class makes sense.</p>
<p>The following example uses anonymous class to implement an action listener.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.awt.*;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.awt.event.*;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.io.Serializable;
<code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> MyApp <code><a href="Keywords/implements.html" title="Java Programming/Keywords/implements"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">implements</font></a></code> Serializable
{
   BigObjectThatShouldNotBeSerializedWithAButton bigOne;
   Button aButton = <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> Button(); 
   MyApp()
   {
       aButton.addActionListener( <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> ActionListener()
           {
               <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> actionPerformed(ActionEvent e)
               {
                   System.out.println("Hello There");
               }
           }
       );
   }
}
</pre>
<p>The following example does the same thing, but it names the class that implements the action listener.</p>
<pre>
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.awt.*;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.awt.event.*;
<code><a href="Keywords/import.html" title="Java Programming/Keywords/import"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">import</font></a></code> java.io.Serializable;
<code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> MyApp <code><a href="Keywords/implements.html" title="Java Programming/Keywords/implements"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">implements</font></a></code> Serializable
{
   BigObjectThatShouldNotBeSerializedWithAButton bigOne;
   Button aButton = new Button();
   // --- Nested class to implement the action listener ---
   <code><a href="Keywords/class.html" title="Java Programming/Keywords/class"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">class</font></a></code> MyActionListener <code><a href="Keywords/implements.html" title="Java Programming/Keywords/implements"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">implements</font></a></code> ActionListener
   {
       <code><a href="Keywords/public.html" title="Java Programming/Keywords/public"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">public</font></a></code> <code><a href="Keywords/void.html" title="Java Programming/Keywords/void"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">void</font></a></code> actionPerformed(ActionEvent e)
       {
           System.out.println("Hello There");
       }
   }
   MyApp()
   {
       aButton.addActionListener( <code><a href="Keywords/new.html" title="Java Programming/Keywords/new"><font style="color:DodgerBlue4; text-decoration: none; font-weight: bold;">new</font></a></code> MyActionListener() );
   }
}
</pre>
<p>Using <b>anonymous</b> classes is especially preferable when you intend to use many different classes that each implement the same Interface.</p>





</div>				
								
				
				
												
								
												
				
				
								<div class="visualClear"></div>
				
								
			</div>
			</div></body></html>